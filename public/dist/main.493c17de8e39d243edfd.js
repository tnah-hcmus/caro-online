(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"8js9":function(e,t,a){var n=a("LboF"),r=a("coPr");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},AzrZ:function(e,t,a){var n=a("LboF"),r=a("ettg");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},WJG9:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("i8i4"),i=a.n(o),c=(a("AzrZ"),a("55Ip")),l=a("Ty5D"),s=a("/MKj"),m=a("J4zp"),u=a.n(m),d=a("469l"),p=a("5CWz"),g=a("kKAo"),f=a("tRbT"),h=a("w4+p"),b=a.n(h),y=a("R/WZ"),E=a("Z3vd"),v=a("r9w1"),w=a("hlie"),x=a("hlFM"),O=a("ofer"),k=Object(y.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#d2d2d2",padding:"15px",bottom:"0"}}})),j=function(){var e=k();return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",r.a.createElement(w.a,{color:"inherit",href:"https://material-ui.com/"},"My Website")," ",(new Date).getFullYear(),"."))},D=a("pVnL"),N=a.n(D),I=a("79Xs"),C=a("ZiQX");function S(e){return r.a.createElement(C.a,N()({elevation:6,variant:"filled"},e))}var P=Object(y.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function R(e){var t=P(),a=r.a.useState(!1),o=u()(a,2),i=o[0],c=o[1];Object(n.useEffect)((function(){e.message&&c(e.message.open)}),[e.message]);var l=function(e,t){"clickaway"!==t&&c(!1)};return r.a.createElement("div",{className:t.root},r.a.createElement(I.a,{open:i,autoHideDuration:6e3,onClose:l},r.a.createElement(S,{onClose:l,severity:e.message?e.message.type:"success"},e.message?e.message.content:"loading...")))}var L=a("uJt2"),T=a.n(L),_=Object(y.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(1.2,0),minHeight:40}}})),W=function(e){var t=_(),a=Object(n.useState)(null),o=u()(a,2),i=o[0],c=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,onSubmit:function(t){t.preventDefault();var a=t.target.elements.fname.value.trim()+" "+t.target.elements.lname.value.trim(),n=t.target.elements.password.value.trim(),r=t.target.elements.email.value.trim();e.signup({email:r,password:n,name:a},c)},noValidate:!0},r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{autoComplete:"fname",name:"fname",variant:"outlined",required:!0,fullWidth:!0,id:"fName",label:"First Name",autoFocus:!0})),r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lname",label:"Last Name",name:"lname",autoComplete:"lname"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign Up"),r.a.createElement(E.a,{href:"/auth/google",startIcon:r.a.createElement("img",{width:"20px",style:{marginBottom:3,marginRight:5},alt:"Google sign-in",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png"}),fullWidth:!0,variant:"contained",color:"default",className:t.submit},"Log In With Google"),r.a.createElement(E.a,{href:"/auth/facebook",startIcon:r.a.createElement(T.a,{color:"primary",style:{fontSize:28}}),fullWidth:!0,variant:"contained",color:"default",className:t.submit},"Log In With Facebook"),r.a.createElement(R,{message:i}),r.a.createElement(f.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement(w.a,{onClick:function(){return e.toLogin()},variant:"body2"},"Already have an account? Sign in"))),r.a.createElement(x.a,{mt:5},r.a.createElement(j,null))))},A=a("ZGBi"),M=a("VmPI"),z=Object(y.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(1.2,0),minHeight:40}}})),G=function(e){var t=z(),a=Object(n.useState)(null),o=u()(a,2),i=o[0],c=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target.elements.email.value,n=t.target.elements.password.value;e.login(a,n,c)}},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(A.a,{control:r.a.createElement(M.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In"),r.a.createElement(E.a,{href:"/auth/google",startIcon:r.a.createElement("img",{width:"20px",style:{marginBottom:3,marginRight:5},alt:"Google sign-in",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png"}),fullWidth:!0,variant:"contained",color:"default",className:t.submit},"Log In With Google"),r.a.createElement(E.a,{href:"/auth/facebook",startIcon:r.a.createElement(T.a,{color:"primary",style:{fontSize:28}}),fullWidth:!0,variant:"contained",color:"default",className:t.submit},"Log In With Facebook"),r.a.createElement(R,{message:i}),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(w.a,{href:"/password/forgot",variant:"body2"},"Forgot password?")),r.a.createElement(f.a,{item:!0},r.a.createElement(w.a,{onClick:function(){return e.toSignUp()},variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(x.a,{mt:5},r.a.createElement(j,null))))},B=a("lSNA"),q=a.n(B),F=a("vDqi"),Y=a.n(F),X=function(e){var t=e.name,a=e.email,n=e.coins,r=e.win,o=e.lose,i=e.draw,c=e.total,l=e.role,s=e.games;return{type:"init_info",payload:q()({name:t,email:a,coins:n,win:r,lose:o,draw:i,total:c,role:l,games:s},"total",s.length)}},U=function(e,t){return{type:"update_info",payload:{property:e,newData:t}}},H=function(e){return function(t){Y.a.post("/api/users/me",{},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var a=e.data;t(X(a))})).catch((function(e){console.log(e)}))}};function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var J=function(e,t){return{type:"login",payload:{id:e,token:t,inRoom:!1}}},K=function(e){return{type:"join",payload:e}},Q=function(e,t){return function(a){Y.a.post("/api/users/me",{},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var n=e.data;a(J(n.id,n.accessToken)),a(X({name:n.name,email:n.email})),t.push("/")})).catch((function(e){console.log(e.response)}))}},Z=function(){return function(e){e({type:"logout"}),e({type:"clear_info"})}},$=Object(y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:"auto 35px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),ee={startLogin:function(e,t,a){return function(n,r){Y.a.post("/api/auth/local",{email:e,password:t}).then((function(e){var t=e.data;n(J(t.id,t.accessToken)),n(H(t.accessToken))})).catch((function(e){var t=e.response&&e.response.data&&e.response.data.error;a({type:"error",content:"".concat(t||e.response.statusText),open:!0})}))}},startSignUp:function(e,t){return function(a,n){Y.a.post("/api/users",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)).then((function(e){var n=e.data;a(J(n.id,n.token)),a(H(n.accessToken)),t({type:"success",content:"Signup Successfully !!!",open:!0})})).catch((function(e){var a=e.response&&e.response.data&&e.response.data.error;t({type:"error",content:"".concat(a||e.response.statusText),open:!0})}))}}},te=Object(s.b)(null,ee)((function(e){var t=$(),a=Object(n.useState)(!0),o=u()(a,2),i=o[0],c=o[1];return r.a.createElement(f.a,{container:!0,component:"main",className:t.root},r.a.createElement(p.a,null),r.a.createElement(f.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(f.a,{item:!0,xs:12,sm:8,md:5,component:g.a,elevation:6,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(d.a,{className:t.avatar},r.a.createElement(b.a,null)),i?r.a.createElement(G,{login:e.startLogin,toSignUp:function(){return c(!1)}}):r.a.createElement(W,{signup:e.startSignUp,toLogin:function(){return c(!0)}}))))})),ae=a("+Isj"),ne=a("iae6"),re=a("p46w"),oe=a.n(re),ie=Object(y.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ce={loginThirdParty:Q},le=Object(s.b)(null,ce)(Object(l.i)((function(e){var t=ie();return Object(n.useEffect)((function(){"#_=_"===window.location.hash&&(window.location.hash="");var t=oe.a.get("x-auth-cookie");t?(oe.a.remove("x-auth-cookie"),e.loginThirdParty(t,e.history)):e.history.push("/")}),[]),r.a.createElement("div",null,r.a.createElement(ae.a,{className:t.backdrop,open:!0},r.a.createElement(ne.a,{color:"inherit"})))}))),se=a("kfFl"),me=a("EQI2"),ue=a("38fH"),de=a.n(ue),pe=Object(y.a)((function(e){return{root:{width:600,height:"auto"},dialog:{"& > *":{margin:"10px 0"}},form:{display:"flex",flexDirection:"column"},textFiled:{width:320,margin:"10px auto"},button:{width:"50%",margin:"10px auto"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),ge={login:function(e,t,a,n,r){return function(o){Y.a.post("/api/admin/auth",{username:e,password:t},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var t=e.data.token;o(U("secretKey",t)),n.push("/admin/dashboard")})).catch((function(e){var t=e.response&&e.response.data&&e.response.data.error;r({type:"error",content:"".concat(t||e.response.statusText),open:!0})}))}}},fe=Object(s.b)((function(e){return{token:e.auth.token}}),ge)(Object(l.i)((function(e){var t=pe(),a=Object(n.useState)(null),o=u()(a,2),i=o[0],c=o[1];return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,style:{minHeight:"100vh"}},r.a.createElement(se.a,{open:!0,onClose:function(){return!1},maxWidth:"lg"},r.a.createElement(me.a,null,r.a.createElement(f.a,{container:!0,direction:"column",alignItems:"center",className:t.dialog},r.a.createElement(d.a,{className:t.avatar},r.a.createElement(de.a,null)),r.a.createElement(O.a,{variant:"h5",color:"initial"},"WELCOME"),r.a.createElement(O.a,{variant:"body2",color:"initial"},"PLEASE LOGIN TO ADMIN DASHBOARD"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target.elements.username.value,n=t.target.elements.password.value;e.login(a,n,e.token,e.history,c)}},r.a.createElement(v.a,{id:"username",autoComplete:"username",fullWidth:!0,margin:"normal",required:!0,label:"Username",variant:"outlined",className:t.textFiled}),r.a.createElement(v.a,{id:"password",autoComplete:"password",fullWidth:!0,margin:"normal",required:!0,label:"Password",variant:"outlined",type:"password",className:t.textFiled}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Log In"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){return e.history.push("/")}},"Go back")))))),r.a.createElement(R,{message:i}))}))),he=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header__title"},e.title),e.subtitle&&r.a.createElement("h2",{className:"header__subtitle"},r.a.createElement(c.b,{to:"/"},e.subtitle))))};he.defaultProps={title:"Không tìm thấy trang cần tìm",subtitle:"Quay lại trang chủ"};var be=r.a.memo(he),ye=a("lwsE"),Ee=a.n(ye),ve=a("W8MJ"),we=a.n(ve),xe=a("jifJ"),Oe=a.n(xe),ke=new(function(){function e(){Ee()(this,e),this.socket=null}return we()(e,[{key:"connect",value:function(e){if(!this.socket){this.socket=Oe.a.connect("http://localhost:3000/",{query:"userId="+e,secure:!0})}}},{key:"pushData",value:function(e,t){this.socket&&this.socket.emit(e,t)}},{key:"hasListeners",value:function(e){return!!this.socket&&this.socket.hasListeners(e)}},{key:"unsubscribe",value:function(e){this.socket.off(e)}},{key:"onNewData",value:function(e,t){var a=this;!this.hasListeners(e)&&this.socket&&this.socket.on(e,(function(e){e.client=a.socket.id,t(e)}))}},{key:"shutdownWS",value:function(){this.socket.emit("send-disconnect-request"),this.socket=null}}]),e}());function je(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return De(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ne=new(function(){function e(){Ee()(this,e)}return we()(e,[{key:"startListenUpdateUser",value:function(e){ke.onNewData("update-user",e)}},{key:"startListenUpdateChat",value:function(e){ke.onNewData("new-message",(function(t){var a=t.roomID,n=t.message,r=t.timestamp,o=t.owner;e(a,n,!1,r,o)}))}},{key:"startListenGameResult",value:function(e){ke.onNewData("new-result-data",(function(t){var a=t.result;1==a&&e("X"),2==a&&e("O")}))}},{key:"startListenGameRequest",value:function(e){ke.hasListeners("new-game-request")&&ke.unsubscribe("new-game-request"),ke.onNewData("new-game-request",(function(t){var a=t.type,n=t.content,r=t.name;e(a,n,r)}))}},{key:"startListenGameReply",value:function(e,t){ke.hasListeners("new-game-reply")&&ke.unsubscribe("new-game-reply"),ke.onNewData("new-game-reply",(function(a){ke.pushData("game-reply-to-server",a);var n=a.accept,r=a.type;n?e(r):t({type:"error",content:"Đối thủ không đồng ý yêu cầu của bạn",open:!0})}))}},{key:"startListenQuickGame",value:function(e,t,a){ke.onNewData("new-join-game",(function(n){var r=n.roomID;if(t===r){e(r),ke.unsubscribe("new-join-game");var o,i=je(a);try{for(i.s();!(o=i.n()).done;){var c=o.value;clearTimeout(c)}}catch(e){i.e(e)}finally{i.f()}}}))}},{key:"startListenUpdateGameData",value:function(e,t,a,n){ke.onNewData("new-game-data",(function(r){var o=r.roomID,i=r.squares,c=r.status,l=r.player;e(o,i,c,l),c&&n(c.winner),t||a(!0)}))}},{key:"startListenUpdateRoomData",value:function(e){ke.onNewData("new-room-data",(function(t){var a=t.roomID,n=t.newData,r=t.type,o=t.property;e(r,a,o,n)}))}}]),e}()),Ie=a("+JwS"),Ce=a("yv+Y"),Se=a("1waj"),Pe=a.n(Se),Re=new(function(){function e(){Ee()(this,e)}return we()(e,[{key:"joinChannel",value:function(e,t,a,n,r,o,i,c){a=a||null,r=r||null,o=o||null,i=i||null,c=c||null,ke.pushData("join-room",{id:e,userId:t,userName:a,userCoins:n,roomType:r,timer:o,coins:i,password:c})}},{key:"leaveChannel",value:function(e,t){ke.pushData("leave-room",{id:e,userId:t})}},{key:"sendMessage",value:function(e){ke.pushData("send-chat",e)}},{key:"sendGameData",value:function(e){ke.pushData("send-game-data",e)}},{key:"sendJoinGame",value:function(e){ke.pushData("send-join-game",e)}},{key:"sendRoomData",value:function(e){ke.pushData("send-room-data",e)}},{key:"sendResultData",value:function(e){ke.pushData("send-result-data",e)}},{key:"sendGameRequest",value:function(e){ke.pushData("send-game-request",e)}},{key:"sendGameReply",value:function(e){ke.pushData("send-game-reply",e)}}]),e}()),Le=function(e,t){return{type:"game_delete",payload:{roomID:e,size:t}}};function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var We=function(e,t,a,n,r,o,i,c,l){return function(s,m){var u=l||"xyxxyx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})).toUpperCase(),d=c||"public",p=n||"",g=r||30;s(function(e,t,a,n,r,o,i,c){return{type:"add_room",payload:{id:e,players:{X:{id:t,name:a,coins:n},Y:{id:null,name:null}},status:"hidden"===c?1:0,password:r,timer:o,result:0,coins:i,roomType:c}}}(u,e,t,a,p,g,o,d)),s(K(u)),i&&i(u),Re.joinChannel(u,e,t,a,d,g,o,p),Re.sendRoomData({type:"CREATE",roomID:null,property:null,newData:{id:u,players:{X:{id:e,name:t,coins:a},Y:{id:null,name:null}},status:"hidden"===c?1:0,password:p,timer:g,coins:o,roomType:d}})}},Ae=function(e){return{type:"remove_room",payload:{id:e}}},Me=function(e,t,a){return{type:"add_viewer",payload:{id:e,viewerID:t,viewerName:a}}},ze=function(e,t){return{type:"remove_viewer",payload:{id:e,viewerID:t}}},Ge=function(e,t){return{type:"change_status",payload:{id:e,status:t}}},Be=function(e,t){return{type:"update_result",payload:{id:e,result:t}}},qe=function(e,t,a){return function(n,r){t="O"===t?"Y":t;var o=r().room,i=o[e].players[t].id;if(o[e]){if(o[e].players.X.id&&o[e].players.Y.id){var c=o[e].players;"X"==t&&(c.X=_e({},c.Y)),c.Y={id:null,name:null},Re.sendRoomData({type:"UPDATE",roomID:e,property:"players",newData:c}),n(Ge(e,0)),n(function(e,t){return{type:"remove_player",payload:{roomID:e,players:t}}}(e,c)),n(K(null)),setTimeout((function(){Re.sendRoomData({type:"UPDATE",roomID:e,property:"status",newData:0})}),200),setTimeout((function(){Re.leaveChannel(e,i)}),300)}else Re.sendRoomData({type:"DELETE",roomID:e,property:null,newData:null}),n(Ae(e)),n(K(null)),setTimeout((function(){Re.leaveChannel(e,i)}),300);a(e)}}},Fe=Object(y.a)((function(e){return{button:{margin:"10px 20px",textTransform:"upcase"},dialog:{minWidth:200}}})),Ye={addRoom:We},Xe=Object(s.b)((function(e){return{busy:e.auth.inRoom,user:e.user}}),Ye)(Object(l.i)((function(e){var t=Fe(),a=Object(n.useState)(!1),o=u()(a,2),i=o[0],c=o[1],l=Object(n.useRef)(),s=Object(n.useRef)(),m=Object(n.useRef)(),d=function(){c(!1)};return r.a.createElement(f.a,{item:!0},r.a.createElement(E.a,{onClick:function(){c(!0)},variant:"contained",color:"primary",className:t.button,start:r.a.createElement(Pe.a,null)},"Add new room"),r.a.createElement(se.a,{open:i,onClose:d,className:t.dialog},r.a.createElement(Ce.a,{id:"form-dialog-title"},"Add new room"),r.a.createElement(me.a,null,r.a.createElement(v.a,{inputRef:s,autoFocus:!0,variant:"outlined",label:"Password",id:"password",type:"password",fullWidth:!0,style:{marginBottom:15}}),r.a.createElement(v.a,{inputRef:l,variant:"outlined",label:"Time",id:"time",type:"number",fullWidth:!0,style:{marginBottom:15}}),r.a.createElement(v.a,{inputRef:m,variant:"outlined",label:"Coins",id:"coin",type:"number",fullWidth:!0,style:{marginBottom:15}})),r.a.createElement(Ie.a,null,r.a.createElement(E.a,{onClick:function(){if(c(!1),e.busy)e.setMessage({type:"error",content:"You already in another room",open:!0});else{var t=s.current.value||"",a=Number(l.current.value)||30,n=Number(m.current.value)||1;if(a<30)return e.setMessage({type:"error",content:"Thời gian suy nghĩ quá ngắn, thời gian suy nghĩ tối thiểu phải tối thiểu 30 giây.",open:!0}),!1;e.addRoom(e.userId,e.user.name,e.user.coins,t||null,a,n,(function(t){return e.history.push("/room/"+t)}))}},variant:"contained",color:"primary"},"Create"),r.a.createElement(E.a,{onClick:d,color:"primary"},"Cancel"))))}))),Ue=Object(y.a)((function(e){return{button:{margin:"10px 20px"}}})),He=Object(s.b)((function(e){return{busy:e.auth.inRoom}}))((function(e){var t=Ue(),a=Object(n.useRef)();return r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"roomId",size:"small",type:"text",label:"Room ID",inputRef:a}),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){var t=a.current.value;e.busy?e.setMessage({type:"error",content:"You already in ".concat(e.busy==t?"this ":"another","room"),open:!0}):e.joinRoom(t.trim(),e.userId)}},"Join room"))})),Ve=a("bSwy"),Je=a.n(Ve),Ke=Object(y.a)((function(e){return{button:{margin:"10px 20px"}}})),Qe=function(e){var t=e.onPress,a=e.timeOut,o=e.setMessage,i=Ke(),c=Object(n.useState)("Quick Join"),l=u()(c,2),s=l[0],m=l[1],d=function(){m("Quick Join")};return r.a.createElement(f.a,{item:!0},r.a.createElement(E.a,{startIcon:r.a.createElement(Je.a,null),variant:"contained",color:"primary",className:i.button,onClick:function(){if("Quick Join"===s){m("Đang tìm trận...");var e=setTimeout(d,a);t(e)}else o({type:"error",content:"Đang tìm trận, vui lòng chờ",open:!0})}},s))},Ze=a("30+C"),$e=a("50B7"),et=a("o4QW"),tt=a("dl/7"),at=Object(y.a)((function(e){return{root:{},avatar:{backgroundColor:tt.a[500]},actions:{justifyContent:"flex-end"},button:{margin:"0 5px"}}})),nt=Object(s.b)((function(e){return{busy:e.auth.inRoom}}))((function(e){var t=at();return r.a.createElement(f.a,{item:!0,xs:4,className:t.root},r.a.createElement(Ze.a,null,r.a.createElement($e.a,{avatar:r.a.createElement(d.a,{"aria-label":"recipe",className:t.avatar},"R"),title:"Room ID: "+e.id+" | Cược: "+e.coins,subheader:e.players+"/2 player"}),r.a.createElement(et.a,{className:t.actions,disableSpacing:!0},r.a.createElement(E.a,{onClick:function(){e.busy?e.players>=2?e.setMessage({type:"error",content:"Phòng đã đủ số lượng người chơi",open:!0}):e.setMessage({type:"error",content:"You already in ".concat(e.busy==e.id?"this ":"another","room"),open:!0}):e.joinRoom(e.id,e.userId)},variant:"contained",color:"primary",className:t.button},"Join room"),r.a.createElement(E.a,{onClick:function(){return e.viewRoom(e.id,e.userId,e.name)},variant:"contained",color:"primary",className:t.button},"View room"))))})),rt=Object(y.a)((function(e){return{root:{height:"100%",borderRight:"5px solid #d2d2d2",padding:20},functionBtn:{margin:"10px 0 20px",background:"#eee",height:56,borderRadius:"0.8rem",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"},room:{padding:10,background:"#eee",borderRadius:"0.8rem",margin:0,height:"calc(100% - 86px)",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}}})),ot={updateRoomData:function(e,t,a,n){return function(r,o){switch(e){case"CREATE":return void r((i=n,{type:"add_room",payload:i}));case"UPDATE":return void r(function(e,t,a){return{type:"update_room",payload:{roomID:e,property:t,newData:a}}}(t,a,n));case"SPECIFIC":return void r(function(e,t,a){return function(n){switch(t){case"add_viewer":n(Me(e,a.viewerID,a.viewerName));break;case"remove_viewer":n(ze(e,a.viewerID));break;case"GAME_RESET":n(Le(e,a.size))}}}(t,a,n));case"DELETE":return void r(Ae(t))}var i}},joinRoom:function(e,t,a,n,r){return function(o,i){var c=i(),l=c.auth,s=c.room,m=c.user;if(s[e]){if(l.inRoom)return{status:!1,msg:"You already in ".concat(l.inRoom==item.id?"this ":"another","room")};if(m.coins<s[e].coins)return{status:!1,msg:"This room need ".concat(s[e].coins," coin").concat(s[e].coins>1?"s":""," to play. You just have only ").concat(m.coins," coins")};if(s[e].players.X.id&&s[e].players.Y.id)return{status:!1,msg:"Phòng đã đủ số lượng người chơi"};if(""==s[e].password||s[e].password==r){o(function(e,t,a,n){return{type:"add_player",payload:{id:e,playerID:t,playerName:a,playerCoins:n}}}(e,t,a,n)),o(K(e)),Re.joinChannel(e,t,a,n);var u=_e({},s[e].players);return u.Y={id:t,name:a,coins:n},Re.sendRoomData({type:"UPDATE",roomID:e,property:"players",newData:u}),{status:!0,msg:"Success join"}}return{status:!1,msg:"Tham gia phòng thất bại, kiểm tra lại mật khẩu của bạn"}}return{status:!1,msg:"Không thể tìm thấy phòng"}}},addRoom:We,leaveRoom:qe,viewRoom:function(e,t,a,n){return function(r,o){var i=o().room;return""==i[e].password||i[e].password==n?(Re.joinChannel(e),Re.sendRoomData({type:"SPECIFIC",roomID:e,property:"add_viewer",newData:{viewerName:a,viewerID:t}}),r(Me(e,t,a)),r(K(e)),{status:!0,msg:"Success join"}):{status:!1,msg:"Sai mật khẩu, kiểm tra lại mật khẩu của bạn"}}},fetchRoom:function(e,t){return function(a){t||Y.a.get("/api/rooms",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){a({type:"init_room",payload:{data:e.data}})})).catch((function(e){console.log(e.response)}))}}},it=Object(s.b)((function(e){return{rooms:e.room,user:e.user,token:e.auth.token}}),ot)(Object(l.i)((function(e){var t,a=rt(),o=Object(n.useState)(!1),i=u()(o,2),c=i[0],l=i[1],s=Object(n.useRef)(),m=Object(n.useState)({id:null,userId:null}),d=u()(m,2),p=d[0],g=d[1],h=Object(n.useState)(null),b=u()(h,2),y=b[0],w=b[1],x=(null===(t=e.history.location.state)||void 0===t?void 0:t.ignore)||null,O=function(){l(!1),g({id:null,userId:null,type:null})};Object(n.useEffect)((function(){ke.connect(e.userId),Ne.startListenUpdateRoomData(e.updateRoomData),e.fetchRoom(e.token,x)}),[]);var k=function(t,a,n,r){var o=null;"VIEW"===r?o=e.viewRoom(t,a,e.user.name,n||null):"PLAY"===r&&(o=e.joinRoom(t,a,e.user.name,e.user.coins,n||null)),o.status?D(t):N(o.msg)},j=function(t,a,n){var r=e.rooms[t];r?r.password&&""!==r.password?(l(!0),g({id:t,userId:a,type:n})):k(t,a,null,n):w({type:"error",content:"Mã phòng không hợp lệ",open:!0})},D=function(t){e.history.push("/room/"+t),O()},N=function(e){w({type:"error",content:e,open:!0}),O()};return r.a.createElement(f.a,{container:!0,className:a.root},r.a.createElement(f.a,{container:!0,item:!0,xs:12,direction:"row",justify:"space-between",className:a.functionBtn},r.a.createElement(Xe,{userId:e.userId,setMessage:w}),r.a.createElement(Qe,{onPress:function(t){var a=Object.values(e.rooms).find((function(e){return"hidden"===e.roomType&&!!e.players.X.id+!!e.players.Y.id<2}));if(a)j(a.id,e.userId,"PLAY"),Re.sendJoinGame({roomID:a.id}),clearTimeout(t);else{var n="xyxxyx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})).toUpperCase();e.addRoom(e.userId,e.user.name,e.user.coins,null,30,1,null,"hidden",n);var r=setTimeout((function(){e.leaveRoom(n,"X",(function(){return w({type:"error",content:"Tạm thời không tìm thấy đối thủ, vui lòng thử lại sau",open:!0})}))}),1e4);Ne.startListenQuickGame((function(){return e.history.push("/room/"+n)}),n,[t,r])}},timeOut:1e4,setMessage:w}),r.a.createElement(He,{userId:e.userId,joinRoom:function(e,t){return j(e,t,"PLAY")},setMessage:w})),r.a.createElement(f.a,{container:!0,item:!0,xs:12,spacing:2,className:a.room},Object.values(e.rooms).filter((function(e){return"hidden"!==e.roomType})).map((function(t,a){return r.a.createElement(nt,{id:t.id,key:a,players:!!t.players.X.id+!!t.players.Y.id,userId:e.userId,view:!!t.viewer,joinRoom:function(e,t){return j(e,t,"PLAY")},viewRoom:function(e,t){return j(e,t,"VIEW")},name:e.user.name,coins:t.coins,setMessage:w})}))),r.a.createElement(se.a,{open:c,onClose:O,className:a.dialog},r.a.createElement(Ce.a,{id:"form-dialog-title"},"Join room"),r.a.createElement(me.a,null,r.a.createElement(v.a,{inputRef:s,autoFocus:!0,variant:"outlined",label:"Password",id:"password",type:"password",fullWidth:!0})),r.a.createElement(Ie.a,null,r.a.createElement(E.a,{onClick:function(){var e=s.current.value;k(p.id,p.userId,e,p.type)},variant:"contained",color:"primary"},"Join"),r.a.createElement(E.a,{onClick:O,color:"primary"},"Cancel"))),r.a.createElement(R,{message:y}))}))),ct=a("Ti5m"),lt=a.n(ct),st=a("22ne"),mt=a.n(st),ut=Object(y.a)((function(e){return{root:{background:"transparent",margin:5,display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{display:"flex",flexDirection:"row"},info:{margin:"auto 5px"},status:{color:"#41ee41",height:10,width:10,margin:"auto 5px"}}})),dt=function(e){var t=ut();return r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.label},r.a.createElement(lt.a,null),r.a.createElement("div",{className:t.info},e.name)),r.a.createElement(mt.a,{size:"small",className:t.status})))},pt=Object(y.a)((function(e){return{root:{},title:{margin:10,fontSize:18,fontWeight:"bold"}}})),gt=function(e){var t=e.user,a=pt();return r.a.createElement(f.a,{container:!0,className:a.root},r.a.createElement(f.a,{item:!0,xs:12,className:a.title},"Total: ",t.length," online"),t.map((function(e,t){return r.a.createElement(dt,{key:t,name:e})})))},ft=Object(s.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)([]),a=u()(t,2),o=a[0],i=a[1];return Object(n.useEffect)((function(){return ke.connect(e.userId),Ne.startListenUpdateUser(i),function(){return ke.unsubscribe("update-user")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,style:{minHeight:"calc(100vh - 114px)"}},r.a.createElement(f.a,{item:!0,xs:12,md:10},r.a.createElement(it,{userId:e.userId})),r.a.createElement(f.a,{item:!0,xs:12,md:2},r.a.createElement(gt,{user:o}))),r.a.createElement(f.a,null,r.a.createElement(j,null)))})),ht=a("PsDL"),bt=a("bXiM"),yt=a("lO0E"),Et=a("bqsI"),vt=a("jjAL"),wt=a("AOnC"),xt=a("t0WV"),Ot=a("668i"),kt=Object(y.a)((function(e){return{root:{flexGrow:1,"&>header":{backgroundColor:"#d2d2d2"}},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontSize:24,fontFamily:"Playball",justifyContent:"center","& > a":{color:"white","&:hover":{textDecoration:"none"}}}}})),jt={logout:Z},Dt=Object(s.b)((function(e){return{name:e.user.name,role:e.user.role}}),jt)((function(e){var t=kt(),a=Object(l.g)(),o=Object(n.useState)(!1),i=u()(o,2),s=i[0],m=i[1],d=Object(n.useRef)(null),p=function(e){d.current&&d.current.contains(e.target)||m(!1)},f=Object(n.useRef)(s);Object(n.useEffect)((function(){!0===f.current&&!1===s&&d.current.focus(),f.current=s}),[s]);var h=function(){e.logout()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(bt.a,{position:"static"},r.a.createElement(yt.a,null,r.a.createElement(O.a,{variant:"h6",className:t.title},r.a.createElement(w.a,{component:c.b,to:"/"},"Caro Online")),r.a.createElement("div",null,r.a.createElement(ht.a,{ref:d,onClick:function(){m((function(e){return!e}))},color:"inherit"},r.a.createElement(lt.a,null),r.a.createElement(O.a,{variant:"subtitle2",color:"initial"},e.name)),r.a.createElement(wt.a,{open:s,anchorEl:d.current,placement:"bottom-end",transition:!0},(function(t){var n=t.TransitionProps;return r.a.createElement(Et.a,n,r.a.createElement(g.a,null,r.a.createElement(Ot.a,{onClickAway:p},r.a.createElement(xt.a,{autoFocusItem:s,id:"menu-list-grow"},r.a.createElement(vt.a,{onClick:function(){m(!1),a.push("/profile")}},"Profile"),r.a.createElement(vt.a,{onClick:function(){m(!1),a.push("/changepassword")}},"Change password"),r.a.createElement(vt.a,{onClick:function(){m(!1),a.push("/rank")}},"Ranking"),e.role&&e.role.includes("admin")&&r.a.createElement(vt.a,{onClick:function(){m(!1),a.push("/admin/login")}},"Go to admin page"),r.a.createElement(vt.a,{onClick:h},"Logout")))))})))))),e.children)})),Nt=function(e){var t=e.winning&&e.winning.winArea.includes(e.j+e.i*e.size)?"square square-winning":"square",a="X"===e.value?"http://localhost:3000/images/icons8-X.png":"O"===e.value?"http://localhost:3000/images/icons8-O.png":e.value;return r.a.createElement("button",{className:t,onClick:function(){return e.handleClick(e.i,e.j)}},e.value&&r.a.createElement("img",{src:a,width:28,height:28}))},It=a("kcif"),Ct=a.n(It),St=function(e){return r.a.createElement("div",null,Ct()(e.squares,e.size).map((function(t,a){return r.a.createElement("div",{key:a,className:"board-row"},t.map((function(t,n){return r.a.createElement(Nt,{key:n+a*e.size,value:t,i:a,j:n,winning:e.winning,handleClick:e.handleClick})})))})))},Pt=a("WElE"),Rt=a.n(Pt),Lt=a("JzIh"),Tt=a.n(Lt),_t=a("1qGW"),Wt=a.n(_t),At=a("L+uM"),Mt=a.n(At),zt=a("h/yr"),Gt=a.n(zt),Bt=a("E8kk"),qt=a.n(Bt),Ft=function(e){var t=e.time,a=e.onTimeOut,o=(e.reset,Object(n.useState)(t)),i=u()(o,2),c=i[0],l=i[1],s=function(){return l(c-1)};return Object(n.useEffect)((function(){if(!(c<=0)){var e=setInterval(s,1e3);return function(){return clearInterval(e)}}a()}),[c]),r.a.createElement(O.a,{variant:"h5",color:"secondary"},c,"s")},Yt=Object(y.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)}}})),Xt=function(e){var t=e.name,a=Yt();return r.a.createElement(f.a,{container:!0,item:!0,xs:12,direction:"row"},r.a.createElement(f.a,{container:!0,item:!0,xs:9},r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{alt:"avatar",src:Math.round(Math.random())?"http://localhost:3000/images/icon-dinosaur.png":"http://localhost:3000/images/icon-crocodile.png",className:a.small})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 0"}},r.a.createElement(O.a,{variant:"subtitle2"},t||"Anonymous"))),r.a.createElement(f.a,{container:!0,item:!0,xs:3,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-medal.png",width:24,height:24})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 0"}},r.a.createElement(O.a,{variant:"subtitle2",color:"secondary"},"Private"))))},Ut=a("csfp"),Ht=a("IFCi"),Vt=a("H2TA"),Jt=Object(Vt.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Ht.a),Kt=Object(y.a)((function(e){return{large:{width:e.spacing(7),height:e.spacing(7)},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}})),Qt=function(e){var t=e.type,a=e.coins,n=e.isWin,o=e.name,i=e.isTurn,c=Kt();return r.a.createElement(f.a,{item:!0,xs:5,className:n?"rainbow":""},r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",style:{marginTop:5}},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-medal.png",width:24,height:24})),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"subtitle2",color:"secondary"},a||5))),r.a.createElement(Jt,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:i?"dot":"standard"},r.a.createElement(d.a,{alt:"avatar",src:"X"==t?"http://localhost:3000/images/icon-crocodile.png":"http://localhost:3000/images/icon-dinosaur.png",className:c.large})),r.a.createElement(Ut.a,{title:o||"",arrow:!0},r.a.createElement(O.a,{variant:"subtitle2",className:c.noWrap},o)),r.a.createElement("img",{src:"X"==t?"http://localhost:3000/images/icons8-X.png":"http://localhost:3000/images/icons8-O.png",width:24,height:24}))},Zt=Object(y.a)((function(){return{button:{margin:"5px 0"}}})),$t=function(e){var t=e.icon,a=e.title,n=e.color,o=e.onPress,i=Zt();return r.a.createElement(f.a,{item:!0,xs:11,className:i.button},r.a.createElement(E.a,{variant:"contained",color:n,startIcon:t,onClick:o,fullWidth:!0},a))},ea={updateGameResult:function(e,t){return function(a,n){if(a(Be(e,t)),Re.sendRoomData({type:"UPDATE",roomID:e,property:"result",newData:t}),Re.sendResultData({roomID:e,result:t}),3==t){var r=n().user;a(U("draw",r.draw+1))}}},newGame:function(e,t){return function(a){Re.sendRoomData({type:"UPDATE",roomID:e,property:"result",newData:0}),Re.sendRoomData({type:"SPECIFIC",roomID:e,property:"GAME_RESET",newData:{size:t}}),Re.sendRoomData({type:"UPDATE",roomID:e,property:"status",newData:0}),a(Be(e,0)),a(Le(e,t)),a(Ge(e,0))}}},ta=Object(s.b)(null,ea)(Object(l.i)((function(e){var t=aa(),a=Object(n.useState)(0),o=u()(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=u()(l,2),m=s[0],d=s[1],p=Object(n.useState)({type:null,content:null}),g=u()(p,2),h=g[0],b=g[1],y=function(){return d(!1)},v=function(){Re.sendGameReply({accept:!1,type:h.type}),b({type:null,content:null}),y()};Ne.startListenGameRequest((function(t,a,n){e.player?(b({type:t,content:a}),d(!0)):e.setMessage({type:"success",content:"Player ".concat(n," request ").concat("NEW"==t?"start a new game":"this game will be draw."),open:!0})}));var w=function(){return e.newGame(e.roomID,e.size)},x=function(t){switch(t){case"NEW":w();break;case"DRAW":e.updateGameResult(e.roomID,3)}};return r.a.createElement(f.a,{container:!0,className:t.root},r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:t.section,style:{padding:"15px 0 0"}},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:t.title},r.a.createElement(f.a,{item:!0,className:t.icon},r.a.createElement(qt.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Info"))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:t.statusWrapper},r.a.createElement(f.a,{container:!0,item:!0,xs:12,justify:"space-around",className:t.infoPlayer},r.a.createElement(Qt,q()({type:"X",coins:5,isWin:e.winning&&"X"===e.winning.winner,name:e.X.name,isTurn:e.isTurn},"coins",e.X.coins)),r.a.createElement(f.a,{item:!0,xs:2,fontSize:"large",className:t.iconRed},e.isTurn?r.a.createElement("img",{src:"http://localhost:3000/images/icons8-vs-button.png",width:40,height:48}):r.a.createElement("img",{src:"http://localhost:3000/images/icons8-vs-button-reverse.png",width:40,height:48})),r.a.createElement(Qt,q()({type:"O",coins:5,isWin:e.winning&&"O"===e.winning.winner,name:e.O.name,isTurn:!e.isTurn},"coins",e.O.coins))),r.a.createElement(f.a,{item:!0,xs:12,className:t.countdown},e.waiting&&!e.winning?r.a.createElement(Ft,{time:e.timer,onTimeOut:function(){e.setMessage({type:"error",content:"Time's Up !!!",open:!0}),e.updateGameResult(e.roomID,"X"!==e.player?1:2)},reset:e.waiting}):null,r.a.createElement(O.a,{variant:"h6"},e.status)))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:t.section},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:t.title},r.a.createElement(f.a,{item:!0,className:t.icon},r.a.createElement(Rt.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Function"))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,justify:"center",className:t.statusWrapper},r.a.createElement($t,{icon:r.a.createElement(Gt.a,null),color:"secondary",title:"New Game",onPress:function(){e.player&&""!=e.player?i<5?e.isOwner&&e.winning?w():(c(i+1),Re.sendGameRequest({type:"NEW",content:"Đối thủ yêu cầu bắt đầu một ván mới. Bạn có đồng ý không ?",name:e.player}),Ne.startListenGameReply(x,e.setMessage)):e.setMessage({type:"error",content:"Request new game too much, you was banned and can't request anymore",open:!0}):e.setMessage({type:"error",content:"Only player can use this function",open:!0})}}),r.a.createElement($t,{icon:r.a.createElement(Wt.a,null),color:"primary",title:"Please Draw",onPress:function(){e.player&&""!==e.player?e.winning?e.setMessage({type:"error",content:"Game đã kết thúc",open:!0}):i<5?(c(i+1),Re.sendGameRequest({type:"DRAW",content:"Đối thủ xin hoà. Bạn có đồng ý không?",name:e.player}),Ne.startListenGameReply(x,e.setMessage)):e.setMessage({type:"error",content:"Request draw too much, you was banned and can't request anymore",open:!0}):e.setMessage({type:"error",content:"Only player can use this function",open:!0})}}),r.a.createElement($t,{icon:r.a.createElement(Tt.a,null),color:"primary",title:"Give Up",onPress:function(){e.player&&""!==e.player?e.winning?e.setMessage({type:"error",content:"Game has been end, you can't surrender anymore",open:!0}):(e.updateGameResult(e.roomID,"X"!==e.player?1:2),e.updateCoin("X"!==e.player?"X":"O")):e.setMessage({type:"error",content:"Only player can use this function",open:!0})}}),r.a.createElement($t,{icon:r.a.createElement(Mt.a,null),color:"secondary",title:"Leave Room",onPress:function(){return e.handleLeave(e.player)}}))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:t.section},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:t.title},r.a.createElement(f.a,{item:!0,className:t.icon},r.a.createElement(de.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Viewers"))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:t.statusWrapper,style:{maxHeight:140,overflow:"auto"}},e.viewers&&e.viewers.map((function(e,t){return r.a.createElement(Xt,{name:e.name,key:t})})))),e.player&&""!==e.player&&r.a.createElement(se.a,{open:m,onClose:v,className:t.dialog},r.a.createElement(Ce.a,{id:"form-dialog-title"},"New request"),r.a.createElement(me.a,null,h.content),r.a.createElement(Ie.a,null,r.a.createElement(E.a,{onClick:function(){var e=h.type;Re.sendGameReply({accept:!0,type:e}),b({type:null,content:null}),y()},variant:"contained",color:"primary"},"Accept"),r.a.createElement(E.a,{onClick:v,color:"primary"},"Decline"))))}))),aa=Object(y.a)((function(e){return{section:{},title:{fontWeight:"bold"},statusWrapper:{background:"#ddd",borderRadius:"0.8rem",padding:5,marginBottom:20,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px","&> button":{margin:"5px 0"}},icon:{margin:"auto 0"},iconRed:{margin:"auto 0",color:"red"},infoPlayer:{margin:5,"&>div":{textAlign:"center"}},counter:{},countdown:{textAlign:"center",overflow:"hidden"}}})),na=function(e,t,a,n){for(var r=Math.floor(e/n),o=e%n,i=0,c=[],l=0;l<n;l++)if(t[r*n+l]!==a?(i=0,c=c.slice(0,0)):(i++,c.push(r*n+l)),5===i)return c.push(e),{winArea:c,winner:a};for(var s=0;s<n;s++)if(t[s*n+o]!==a?(i=0,c=c.slice(0,0)):(i++,c.push(s*n+o)),5===i)return c.push(e),{winArea:c,winner:a};for(var m=e%(n+1),u=0;u<n;u++)if(t[m+(n+1)*u]!==a?(i=0,c=c.slice(0,0)):(i++,c.push(m+(n+1)*u)),5===i)return c.push(e),{winArea:c,winner:a};for(var d=e%n+r,p=0;p<n&&p<=d;p++)if(t[d+(n-1)*p]!==a?(i=0,c=c.slice(0,0)):(i++,c.push(d+(n-1)*p)),5===i)return c.push(e),{winArea:c,winner:a};return null},ra=Object(y.a)({root:{},board:{marginTop:20,padding:"15px",background:"#d2d2d2",borderRadius:12,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"},status:{padding:"0px 10px 0 30px"}}),oa={addBoard:function(e,t,a,n){return{type:"add_board",payload:{roomID:e,squares:t,status:a,player:n}}},createBoard:function(e,t){return{type:"create_board",payload:{roomID:e,size:t}}},updateCoins:function(e,t,a){return{type:"update_coins",payload:{roomID:e,player:t,newNumber:a}}},updateUserAfterGame:function(e,t){return function(a,n){var r=n().user;a(U("coins",r.coins+e)),a(t?U("win",r.win+1):U("lose",r.lose+1))}}},ia=Object(s.b)((function(e){return{history:e.history[e.auth.inRoom],roomID:e.auth.inRoom,rooms:e.room,userId:e.auth.id}}),oa)((function(e){var t=ra(),a=Object(n.useState)(""!==e.player),o=u()(a,2),i=o[0],c=o[1],l=Object(n.useState)(),s=u()(l,2),m=s[0],d=s[1],p=e.rooms[e.roomID],g=0,h=null,b=[],y=null;switch(e.history?(g=e.history.length-1,h=e.history[g].status,b=e.history[g].squares,y=e.history[g].player):(e.createBoard(e.roomID,20,e.player),b=Array(400).fill(null)),p.result){case 1:h={winArea:[],winner:"X"};break;case 2:h={winArea:[],winner:"O"};break;case 3:h={winArea:[],winner:"___NO_BODY_WIN___"}}var E=function(t){""!==e.player&&e.updateUserAfterGame(p.coins,t==e.player),"X"==t&&(e.updateCoins(e.roomID,"X",p.players.X.coins+p.coins),e.updateCoins(e.roomID,"Y",p.players.Y.coins-p.coins)),"O"==t&&(e.updateCoins(e.roomID,"X",p.players.X.coins-p.coins),e.updateCoins(e.roomID,"Y",p.players.Y.coins+p.coins))};Ne.startListenUpdateGameData(e.addBoard,i,c,E);Ne.startListenGameResult(E);var v=function(t,a,n){var r=20*t+a,o=b.slice();if(h)d({type:"error",content:"Game đã kết thúc",open:!0});else if(o[r])d({type:"error",content:"Ô này đã được đánh",open:!0});else{o[r]=n;var i=na(r,o,o[r],20);i&&E(i.winner),e.addBoard(e.roomID,o,i,n),Re.sendGameData({roomID:e.roomID,squares:o,status:i,player:n,x:t,y:a})}};return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(f.a,{container:!0,item:!0,xs:12,md:9,className:t.root},r.a.createElement(f.a,{item:!0,xs:8,className:t.board},r.a.createElement(St,{squares:b,size:20,handleClick:function(t,a){h?d({type:"error",content:"Game đã kết thúc",open:!0}):""===e.player?d({type:"error",content:"Bạn không phải là người chơi",open:!0}):e.player===y?d({type:"error",content:"Hãy chờ tới lượt của bạn",open:!0}):v(t,a,e.player)},winning:h,setMessage:d})),r.a.createElement(f.a,{item:!0,xs:4,className:t.status},r.a.createElement(ta,{X:p.players.X,O:p.players.Y,status:h?"___NO_BODY_WIN___"!==h.winner?"Winner: "+h.winner:"Two player draw!":g>=400?"Two player draw!":"Playing..",winning:h,isTurn:p.players.X.id===e.userId?e.player!==y:e.player===y,roomID:e.roomID,player:e.player,waiting:""!==e.player&&y&&e.player!==y,size:20,setMessage:d,isOWner:p.players.X.id===e.userId,timer:p.timer,handleLeave:e.handleLeave,viewers:p.viewer,updateCoin:E})),r.a.createElement(R,{message:m})):r.a.createElement("p",null,"Đang tải trận, vui lòng chờ"))})),ca=a("dsqu"),la=a("J5ja"),sa=Object(y.a)({root:{padding:"5px 10px"},info:{},content:{borderRadius:12,color:"white",padding:"5px 10px",width:"fit-content",height:"fit-content",whiteSpace:"break-spaces",wordBreak:"break-word"}}),ma=function(e){var t=e.message,a=e.isMyMessage,n=e.owner,o=sa();return r.a.createElement(f.a,{container:!0,className:o.root,justify:a&&"flex-end"},!a&&r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(O.a,{variant:"subtitle2",color:"initial"},n)),r.a.createElement(f.a,{item:!0,className:o.content,style:{background:"".concat(a?"#1d4bcd":"#727272")}},t))},ua=Object(y.a)({root:{padding:15},content:{borderRadius:"12px",background:"#d2d2d2",height:480,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"},title:{fontWeight:"bold",fontSize:18},input:{padding:4,borderTop:"1px solid #bababa",height:50},inputBtn:{height:30,borderRadius:5,border:"1px solid #dedede",fontSize:16,width:"100%"},box:{height:400,maxHeight:400,overflowY:"auto"},icon:{margin:"auto 0"}}),da={addMessage:function(e,t,a,n,r){return function(o,i){o(function(e,t,a,n,r){return{type:"add_message",payload:{roomID:e,message:t,isMyMessage:a,timestamp:n,owner:r}}}(e,t,a,n,r)),a&&Re.sendMessage({roomID:e,message:t,timestamp:n,owner:r})}}},pa=Object(s.b)((function(e){return{chat:e.chat,name:e.user.name}}),da)((function(e){var t=Object(n.useRef)(),a=e.isReview?e.chats.map((function(t){if(t.timestamp<e.timeFlag||e.isEnd)return{message:t.message,owner:t.owner,isMyMessage:t.owner==e.name}})).filter((function(e){return e})):e.chat[e.roomID]||[];e.isReview||Ne.startListenUpdateChat(e.addMessage);var o=ua();return r.a.createElement(f.a,{item:!0,container:!0,xs:3,className:o.root},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:o.title},r.a.createElement(f.a,{item:!0,className:o.icon},r.a.createElement(ca.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Box Chat"))),r.a.createElement(f.a,{item:!0,container:!0,xs:12,className:o.content,alignItems:"flex-end"},r.a.createElement(f.a,{item:!0,xs:12,className:o.box},a.map((function(e,t){return r.a.createElement(ma,{key:t,isMyMessage:e.isMyMessage,message:e.message,owner:e.owner})}))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,alignItems:"flex-end",direction:"row",className:o.input},r.a.createElement(f.a,{item:!0,xs:8,style:{padding:"0 10px"}},r.a.createElement("textarea",{id:"message",className:o.inputBtn,ref:t,disabled:e.isReview})),r.a.createElement(f.a,{item:!0,xs:4,style:{margin:"auto",padding:0}},r.a.createElement(E.a,{start:r.a.createElement(la.a,null),variant:"contained",color:"primary",disabled:e.isReview,onClick:function(){if(!e.isReview){var a=Date.now(),n=t.current.value;e.addMessage(e.roomID,n,!0,a,e.name)}}},"Send")))))})),ga=Object(y.a)({root:{minWidth:350,display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"},actions:{justifyContent:"center"},infoPlayer:{border:"1px solid #d2d2d2",boxShadow:"0 0.5px 8px red",margin:"auto 5px",padding:10,fontSize:18,"&>div":{margin:"auto 5px"}},icon:{maxHeight:50,margin:5}}),fa={startGame:function(e){return function(t){Re.sendRoomData({type:"UPDATE",roomID:e,property:"status",newData:1}),t(Ge(e,1))}},leaveRoom:qe,leaveViewRoom:function(e,t,a){return function(n){Re.leaveChannel(e),Re.sendRoomData({type:"SPECIFIC",roomID:e,property:"remove_viewer",newData:{viewerID:t}}),n(ze(e,t)),n(K(null)),a()}},updateInfo:U},ha=Object(s.b)((function(e){return{roomID:e.auth.inRoom,rooms:e.room,id:e.auth.id,total:e.user.total}}),fa)(Object(l.i)((function(e){var t=ga(),a=Object(n.useState)(null),o=u()(a,2),i=o[0],c=o[1],l="",s=e.rooms[e.roomID];s?s.players.X.id===e.id?l="X":s.players.Y.id===e.id&&(l="O"):s={players:{X:null,Y:null},status:0};var m=Object(n.useState)(!!s.status),d=u()(m,2),p=d[0],g=d[1];!!p!=!!s.status&&g(!!s.status);var h=function(t){""!==t?e.leaveRoom(e.roomID,t,(function(t){return e.history.push("/",{ignore:t})})):e.leaveViewRoom(e.roomID,e.id,(function(){return e.history.push("/")}))};return r.a.createElement(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",alignContent:"stretch"},p?r.a.createElement(r.a.Fragment,null,r.a.createElement(ia,{player:l,handleLeave:h}),r.a.createElement(pa,{roomID:e.roomID})):r.a.createElement(se.a,{open:!p,onClose:function(){return g(!1)}},r.a.createElement(me.a,{className:t.root},r.a.createElement("div",{className:t.infoPlayer},r.a.createElement("img",{src:"http://localhost:3000/images/icons8-X.png",alt:"O",width:24,height:24}),r.a.createElement("div",null,s.players.X&&s.players.X.name||"You")),r.a.createElement("div",{className:t.icon},r.a.createElement("img",{height:50,width:50,src:"http://localhost:3000/images/icons8-vs-button.png"})),r.a.createElement("div",{className:t.infoPlayer},r.a.createElement("img",{src:"http://localhost:3000/images/icons8-O.png",alt:"O",width:24,height:24}),r.a.createElement("div",null,s.players.Y&&s.players.Y.name||"Chưa xác định"))),r.a.createElement(Ie.a,{className:t.actions},s&&s.players.X.id===e.id?s.players.Y.id&&s.players.X.id?r.a.createElement(E.a,{onClick:function(){s&&(s.players.X.id===e.id?s.players.Y.id&&s.players.X.id?(e.startGame(e.roomID),e.updateInfo("total",e.total+1),g(!0)):c({type:"error",content:"Chưa đủ người để bắt đầu trận",open:!0}):c({type:"error",content:"Chỉ có chủ phòng mới có quyền bắt đầu trận",open:!0}))},size:"large",variant:"contained",color:"primary"},"Start"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Chờ đối thủ vào trận"),r.a.createElement(E.a,{onClick:function(){return h(l)},size:"large",variant:"contained",color:"primary"},"Leave room")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Chờ chủ phòng bắt đầu trận"),r.a.createElement(E.a,{onClick:function(){return h(l)},size:"large",variant:"contained",color:"primary"},"Leave room")))),r.a.createElement(R,{message:i}))}))),ba=Object(y.a)((function(e){return{root:{width:600,height:"auto"},dialog:{"& > *":{margin:"10px 0"}},form:{display:"flex",flexDirection:"column"},textFiled:{width:320,margin:"10px auto"},button:{width:"50%",margin:"10px auto"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),ya={login:Q},Ea=Object(s.b)(null,ya)(Object(l.i)((function(e){var t=ba(),a=oe.a.get("x-update-token"),o=Object(n.useState)(null),i=u()(o,2),c=i[0],l=i[1];return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,style:{minHeight:"100vh"}},r.a.createElement(se.a,{open:!0,onClose:function(){return!1},maxWidth:"lg"},r.a.createElement(me.a,null,r.a.createElement(f.a,{container:!0,direction:"column",alignItems:"center",className:t.dialog},r.a.createElement(d.a,{className:t.avatar},r.a.createElement(de.a,null)),r.a.createElement(O.a,{variant:"h5",color:"initial"},"WELCOME"),r.a.createElement(O.a,{variant:"body2",color:"initial"},"UPDATE YOUR PASSWORD"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){if(t.preventDefault(),a){var n=t.target.elements.password.value;Y.a.post("/api/recover/update",{password:n,token:a}).then((function(t){e.login(t.data,e.history)})).catch((function(e){var t=e.response&&e.response.data&&e.response.data.message;l({type:"error",content:"".concat(t||e.response.statusText),open:!0})}))}else l({type:"error",content:"Missing reset password token",open:!0})}},r.a.createElement(v.a,{id:"password",autoComplete:"password",fullWidth:!0,margin:"normal",required:!0,label:"Password",variant:"outlined",type:"password",className:t.textFiled}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Change password")))))),r.a.createElement(R,{message:c}))}))),va=Object(y.a)((function(e){return{root:{width:600,height:"auto"},dialog:{"& > *":{margin:"10px 0"}},form:{display:"flex",flexDirection:"column"},textFiled:{width:320,margin:"10px auto"},button:{width:"50%",margin:"10px auto"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),wa=function(e){var t=va(),a=Object(n.useState)(null),o=u()(a,2),i=o[0],c=o[1];return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,style:{minHeight:"100vh"}},r.a.createElement(se.a,{open:!0,onClose:function(){return!1},maxWidth:"lg"},r.a.createElement(me.a,null,r.a.createElement(f.a,{container:!0,direction:"column",alignItems:"center",className:t.dialog},r.a.createElement(d.a,{className:t.avatar},r.a.createElement(de.a,null)),r.a.createElement(O.a,{variant:"h5",color:"initial"},"WELCOME"),r.a.createElement(O.a,{variant:"body2",color:"initial"},"RECOVER YOUR ACCOUNT"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var t=e.target.elements.email.value;t||c({type:"error",content:"Email is not fill",open:!0}),Y.a.post("/api/recover/request",{email:t}).then((function(e){var t=e.response&&e.response.data&&e.response.data.message;c({type:"success",content:"".concat(t||"A verification email is sent to your email, following to recover your account"),open:!0})})).catch((function(e){var t=e.response&&e.response.data&&e.response.data.message;c({type:"error",content:"".concat(t||e.response.statusText),open:!0})}))}},r.a.createElement(v.a,{id:"email",autoComplete:"email",fullWidth:!0,margin:"normal",required:!0,label:"Email",variant:"outlined",type:"text",className:t.textFiled}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Send request")))))),r.a.createElement(R,{message:i}))},xa=a("o0o1"),Oa=a.n(xa),ka=a("yXPU"),ja=a.n(ka),Da=a("Sgle"),Na=a("wb2y"),Ia=a("Rme4"),Ca=a.n(Ia),Sa=a("MPUk"),Pa=a.n(Sa),Ra=a("O3kt"),La=a.n(Ra),Ta=a("wd/R"),_a=a.n(Ta),Wa=Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),marginBottom:5,width:20,height:20},label:{minWidth:110},avatar:{borderRadius:"50%",background:"#ddd"},info:{marginLeft:20,paddingLeft:"15px !important",borderLeft:"1px solid #ddd"},historyGame:{background:"#d2d2d2",borderRadius:12,boxShadow:"0 1px 5px black"},game:{padding:10}}})),Aa=function(e){return Y.a.get("/api/games?filterBy=userGames",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},Ma=function(){return r.a.createElement(f.a,{item:!0,xs:12,style:{width:"100%",padding:"10px 0"}},r.a.createElement(Na.a,null))},za={updateName:function(e,t,a){return function(n){Y.a.patch("/api/users/"+a,{property:"name",data:e},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){n(U("name",e))})).catch((function(e){console.log(e.response)}))}}},Ga=Object(s.b)((function(e){return{token:e.auth.token,userId:e.auth.id,user:e.user}}),za)(Object(l.i)((function(e){var t=e.user,a=e.updateName,o=e.token,i=e.userId,l=e.history,s=Wa(),m=t.name.split(" "),d=m.pop(),p=m.join(" "),g=Object(n.useState)(d),h=u()(g,2),b=h[0],y=h[1],x=Object(n.useState)(p),k=u()(x,2),j=k[0],D=k[1],N=Object(n.useState)(!1),I=u()(N,2),C=I[0],S=I[1],P=Object(n.useState)([]),R=u()(P,2),L=R[0],T=R[1];Object(n.useEffect)((function(){(function(){var e=ja()(Oa.a.mark((function e(){var t;return Oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa(o);case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",alignContent:"center",wrap:"nowrap",style:{padding:40}},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(w.a,{color:"inherit",to:"/",component:c.b,className:s.link},r.a.createElement(Ca.a,{className:s.icon}),"Home"),r.a.createElement(O.a,{color:"textPrimary",className:s.link},r.a.createElement(La.a,{className:s.icon}),"Profile"))),r.a.createElement(Ma,null),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12,direction:"row",wrap:"nowrap"},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-dinosaur.png",className:s.avatar})),r.a.createElement(f.a,{item:!0,container:!0,direction:"column",className:s.info},r.a.createElement(f.a,{item:!0,container:!0,direction:"row"},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-medal.png",width:35,height:35})),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},t.coins))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Win: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},t.win))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Lose: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"primary"},t.lose))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Draw: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},t.draw))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Total: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},t.games.length))))),r.a.createElement(Ma,null),r.a.createElement(f.a,{item:!0,container:!0,xs:12,spacing:1},r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:s.label},"First name:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{autoFocus:!0,id:"firstname",size:"small",value:b,onChange:function(e){return y(e.target.value)},variant:"outlined",disabled:!C})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 0",cursor:"pointer"},onClick:function(){return S(!C)}},r.a.createElement(Pa.a,null))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:s.label},"Last name:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"lastname",size:"small",value:j,onChange:function(e){return D(e.target.value)},variant:"outlined",disabled:!C})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 0",cursor:"pointer"},onClick:function(){return S(!C)}},r.a.createElement(Pa.a,null)))),C&&r.a.createElement(f.a,{container:!0,item:!0,xs:12},r.a.createElement(f.a,{item:!0,className:s.label}),r.a.createElement(f.a,{item:!0,style:{width:90,paddingLeft:8}},r.a.createElement(E.a,{onClick:function(){var e=b.trim(),t=[j.trim(),e].join(" ");a(t,o,i),S(!1)},variant:"contained",color:"primary",fullWidth:!0},"Save")),r.a.createElement(f.a,{item:!0,style:{width:90,paddingLeft:8}},r.a.createElement(E.a,{onClick:function(){y(d),D(p),S(!1)},variant:"contained",fullWidth:!0},"Cancel"))),r.a.createElement(Ma,null),r.a.createElement(f.a,{item:!0,container:!0,xs:12,spacing:1},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(O.a,{variant:"h6",color:"initial"},"Games History")),r.a.createElement(f.a,{item:!0,xs:12,className:s.historyGame},r.a.createElement(f.a,{item:!0,container:!0,xs:12,direction:"row",justify:"space-between",wrap:"nowrap",className:s.game},r.a.createElement(f.a,{item:!0,xs:1},r.a.createElement(O.a,{variant:"h6",align:"center"},"RoomID")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6"},"Status")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6",align:"center"},"Date")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6"},"Actions"))),(L||[]).map((function(e,t){return r.a.createElement(f.a,{key:t,item:!0,container:!0,xs:12,direction:"row",justify:"space-between",wrap:"nowrap",className:s.game},r.a.createElement(f.a,{item:!0,xs:1},r.a.createElement(O.a,{variant:"subtitle2",align:"center"},e.roomID)),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"subtitle2"},4===e.status?"Corrupt game":1===e.status?"X":"Draw game")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"subtitle2",align:"center"},_a()(e.start).format("DD-MM-YYYY hh:mm:ss"))),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return l.push("/review/"+e._id,{token:o})}},"View detail")))}))))))}))),Ba=a("oQ0A"),qa=a.n(Ba),Fa=Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:20,height:20},label:{minWidth:220}}}));var Ya={changePassword:function(e,t,a,n){return function(r){return Y.a.put("/api/users/"+a+"/password",{oldPass:e,newPass:t},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){var t=e.data;return r(function(e){return{type:"update_token",payload:e}}(t)),{status:!0}})).catch((function(e){return{status:!1,content:{type:"error",content:e.response&&e.response.data&&e.response.data.error||"Lỗi không xác định",open:!0}}}))}}},Xa=Object(s.b)((function(e){return{token:e.auth.token,id:e.auth.id}}),Ya)(Object(l.i)((function(e){var t=Fa(),a=Object(n.useState)(""),o=u()(a,2),i=o[0],l=o[1],s=Object(n.useState)(""),m=u()(s,2),d=m[0],p=m[1],g=Object(n.useState)(""),h=u()(g,2),b=h[0],y=h[1],x=Object(n.useState)(null),k=u()(x,2),j=k[0],D=k[1],N=function(){var t=ja()(Oa.a.mark((function t(){var a;return Oa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d===b){t.next=5;break}return D({type:"error",content:"Mật khẩu mới không khớp",open:!0}),t.abrupt("return");case 5:if(!(d.length<7)){t.next=10;break}return D({type:"error",content:"Mật khẩu mới phải dài hơn 7 ký tự",open:!0}),t.abrupt("return");case 10:return t.next=12,e.changePassword(i,d,e.id,e.token);case 12:(a=t.sent).status?e.history.push("/"):D(a.content);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"flex-start",alignContent:"center",wrap:"nowrap",style:{padding:40}},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(w.a,{color:"inherit",to:"/",component:c.b,className:t.link},r.a.createElement(Ca.a,{className:t.icon}),"Home"),r.a.createElement(O.a,{color:"textPrimary",className:t.link},r.a.createElement(qa.a,{className:t.icon}),"Change password"))),r.a.createElement(f.a,{item:!0,xs:12,style:{width:"100%",padding:"10px 0"}},r.a.createElement(Na.a,null)),r.a.createElement(f.a,{item:!0,container:!0,xs:12,spacing:1},r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Current password:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"currentPassword",size:"small",type:"password",onChange:function(e){return l(e.target.value)},variant:"outlined"}))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"New password:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"newPassword",size:"small",type:"password",onChange:function(e){return p(e.target.value)},variant:"outlined"}))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Re-type new password:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"renewPassword",size:"small",type:"password",onChange:function(e){return y(e.target.value)},variant:"outlined"})))),r.a.createElement(f.a,{container:!0,item:!0,xs:12},r.a.createElement(f.a,{item:!0,className:t.label}),r.a.createElement(f.a,{item:!0,style:{width:120,paddingLeft:8}},r.a.createElement(E.a,{onClick:N,variant:"contained",color:"primary",fullWidth:!0},"Save"))),r.a.createElement(R,{message:j})))}))),Ua=a("iuhU"),Ha=a("MjS+"),Va=a("1iKp"),Ja=a.n(Va),Ka=a("cr+I"),Qa=a.n(Ka),Za=Object(y.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:5,borderRadius:0,marginRight:5},iconButtonMenu:{background:"#ececec",padding:"5px 20px",borderRadius:0,marginRight:5},divider:{height:28,margin:4},popper:{zIndex:9999,border:"1px solid #c1c1c1",borderRadius:3}}})),$a=Object(l.i)((function(e){var t=Za(),a=Object(n.useRef)(null),o=Object(n.useState)(!1),i=u()(o,2),c=i[0],l=i[1],s=Object(n.useState)("email"),m=u()(s,2),d=m[0],p=m[1],f=Object(n.useRef)(),h=function(e){a.current&&a.current.contains(e.target)||l(!1)},b=Object(n.useRef)(c);Object(n.useEffect)((function(){!0===b.current&&!1===c&&a.current.focus(),b.current=c}),[c]);var y=function(e){p(e),l(!1)};return r.a.createElement(g.a,{component:"form",className:t.root},r.a.createElement(Ha.a,{className:t.input,placeholder:"Search Users",inputRef:f}),r.a.createElement(Na.a,{className:t.divider,orientation:"vertical"}),r.a.createElement(ht.a,{className:t.iconButton,"aria-label":"menu",ref:a,onClick:function(){l((function(e){return!e}))}},r.a.createElement(O.a,{variant:"body1",color:"initial"},d),r.a.createElement(Ja.a,null)),r.a.createElement(wt.a,{className:t.popper,open:c,anchorEl:a.current,placement:"bottom-end",transition:!0},(function(e){var t=e.TransitionProps;return r.a.createElement(Et.a,t,r.a.createElement(g.a,null,r.a.createElement(Ot.a,{onClickAway:h},r.a.createElement(xt.a,{autoFocusItem:c,id:"menu-list-grow"},r.a.createElement(vt.a,{onClick:function(){return y("email")}},"Email"),r.a.createElement(vt.a,{onClick:function(){return y("name")}},"Name")))))})),r.a.createElement(ht.a,{className:t.iconButtonMenu,"aria-label":"search",onClick:function(){var t=f.current.value;if(t){var a=q()({},d,t);e.history.replace({pathname:"/admin/manageuser",search:Qa.a.stringify(a)}),f.current.value="",p("email")}}},r.a.createElement(Je.a,null)))})),en=Object(y.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"}}}));var tn=function(e){var t=e.title,a=(e.children,e.onDrawerOpen),n=e.open,o=en();return r.a.createElement(bt.a,{position:"fixed",className:Object(Ua.a)(o.appBar,q()({},o.appBarShift,n))},r.a.createElement(yt.a,{style:{justifyContent:"space-between",background:"#3e435f"}},r.a.createElement(ht.a,{color:"inherit","aria-label":"open drawer",onClick:a,edge:"start",className:Object(Ua.a)(o.menuButton,q()({},o.hide,n))},r.a.createElement(Menu,null)),r.a.createElement(O.a,{variant:"h6",noWrap:!0},t),r.a.createElement($a,null)))},an=a("tr08"),nn=a("IIOH"),rn=a("eD//"),on=a("tVbE"),cn=a("56Ss"),ln=a("IsqK"),sn=a("76vg"),mn=a.n(sn),un=a("E2gh"),dn=a.n(un),pn=a("M2xG"),gn=a.n(pn);function fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var bn=Object(y.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,color:"white",background:"#3e435f",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:q()({color:"white",background:"#3e435f",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:hn({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}})),yn={logout:Z},En=Object(s.b)(null,yn)((function(e){var t,a,n=e.onDrawerClose,o=e.open,i=e.logout,s=bn(),m=Object(l.g)(),u=Object(an.a)(),d=[{icon:r.a.createElement(de.a,null),text:"Users",redirect:function(){return m.push("/admin/manageuser")}},{icon:r.a.createElement(gn.a,null),text:"Games",redirect:function(){return m.push("/admin/managegame")}}],p=[{icon:r.a.createElement(qa.a,null),text:"Change password",redirect:function(){return m.push("/admin/changepassword")}},{icon:r.a.createElement(La.a,null),text:"Edit profile",redirect:function(){return m.push("/admin/profile")}},{icon:r.a.createElement(Mt.a,null),text:"Log out",redirect:function(){i(),m.push("/")}}];return r.a.createElement(nn.a,{variant:"permanent",className:Object(Ua.a)(s.drawer,(t={},q()(t,s.drawerOpen,o),q()(t,s.drawerClose,!o),t)),classes:{paper:Object(Ua.a)((a={},q()(a,s.drawerOpen,o),q()(a,s.drawerClose,!o),a))}},r.a.createElement("div",{className:s.toolbar,style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("img",{src:"http://localhost:3000/images/icon-admin.png",height:40,weight:40,style:{margin:"auto"}}),r.a.createElement(c.b,{to:"/admin",style:{margin:"auto"}},r.a.createElement(O.a,{variant:"h6",style:{color:"white"}},"Admin Desktop")),r.a.createElement(ht.a,{onClick:n},"rtl"===u.direction?r.a.createElement(dn.a,{style:{color:"white"}}):r.a.createElement(mn.a,{style:{color:"white"}}))),r.a.createElement(Na.a,null),r.a.createElement(rn.a,null,d.map((function(e,t){return r.a.createElement(on.a,{button:!0,key:e.text,onClick:e.redirect},r.a.createElement(cn.a,{style:{color:"white"}},e.icon),r.a.createElement(ln.a,{primary:e.text}))}))),r.a.createElement(Na.a,null),r.a.createElement(rn.a,null,p.map((function(e,t){return r.a.createElement(on.a,{button:!0,key:e.text,onClick:e.redirect},r.a.createElement(cn.a,{style:{color:"white"}},e.icon),r.a.createElement(ln.a,{primary:e.text}))}))))})),vn=Object(y.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}}));function wn(e){var t=e.children,a=vn(),n=r.a.useState(!0),o=u()(n,2),i=o[0],c=o[1];return r.a.createElement("div",{className:a.root},r.a.createElement(p.a,null),r.a.createElement(En,{onDrawerClose:function(){return c(!1)},open:i}),r.a.createElement(tn,{onDrawerOpen:function(){return c(!0)},open:i}),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),t))}var xn=a("pOn6"),On=a.n(xn),kn=a("KBU2"),jn=a.n(kn),Dn=(a("8js9"),Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:22,height:22},label:{minWidth:220},box:{margin:"10px 0",background:"#ddd",boxShadow:"0 2px 8px grey",borderRadius:8,width:"100%"}}}))),Nn={getUsersList:function(e,t){return function(a){Y.a.get("/api/users",{headers:{Authorization:"Bearer ".concat(e," ").concat(t)}}).then((function(e){a({type:"init_userlist",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},getGamesList:function(e,t){return function(a){Y.a.get("/api/games",{headers:{Authorization:"Bearer ".concat(e," ").concat(t)}}).then((function(e){a({type:"init_gamelist",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}},In=Object(s.b)((function(e){return{token:e.auth.token,secret:e.user.secretKey,gamesList:e.admin.gameList,usersList:e.admin.userList}}),Nn)((function(e){var t=Dn();return Object(n.useEffect)((function(){e.getUsersList(e.token,e.secret),e.getGamesList(e.token,e.secret)}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(O.a,{variant:"body1",color:"textPrimary",className:t.link},r.a.createElement(Ca.a,{className:t.icon}),"Dashboard")),r.a.createElement(f.a,{container:!0,spacing:2,direction:"row",className:t.box},r.a.createElement(f.a,{item:!0,lg:3,xs:6},r.a.createElement("div",{className:"small-box bg-info"},r.a.createElement("div",{className:"inner"},r.a.createElement("h3",null,e.usersList?e.usersList.length:0),r.a.createElement("p",null,"Users")),r.a.createElement("div",{className:"icon"},r.a.createElement(On.a,null)),r.a.createElement(w.a,{to:"/admin/manageuser",className:"small-box-footer",component:c.b},"More info"))),r.a.createElement(f.a,{item:!0,lg:3,xs:6},r.a.createElement("div",{className:"small-box bg-warning"},r.a.createElement("div",{className:"inner"},r.a.createElement("h3",null,e.gamesList?e.gamesList.length:0),r.a.createElement("p",null,"Games")),r.a.createElement("div",{className:"icon"},r.a.createElement(jn.a,null)),r.a.createElement(w.a,{to:"/admin/managegame",className:"small-box-footer",component:c.b},"More info")))))})),Cn=a("VYKx"),Sn=a("ELmG"),Pn=a("++HY");function Rn(e){var t=e.open,a=e.title,n=e.body,o=e.onAgree,i=e.onDisagree;return r.a.createElement(se.a,{open:t,onClose:i},r.a.createElement(Ce.a,null,a),n&&r.a.createElement(me.a,null,r.a.createElement(Pn.a,null,n)),r.a.createElement(Ie.a,null,r.a.createElement(E.a,{onClick:i,color:"primary"},"Disagree"),r.a.createElement(E.a,{onClick:o,variant:"contained",color:"primary",autoFocus:!0},"Agree")))}var Ln={blockUser:function(e,t,a){return function(n){Y.a.delete("/api/users/"+e,{headers:{Authorization:"Bearer ".concat(a," ").concat(t)}}).then((function(t){n(function(e,t,a){return{type:"update_user_admin",payload:{id:e,property:t,value:a}}}(e,"isBlocked",!0))})).catch((function(e){return console.log(e.response)}))}}},Tn=Object(s.b)((function(e){return{secret:e.user.secretKey,token:e.auth.token}}),Ln)((function(e){var t=e.columns,a=e.data,o=e.blockUser,i=e.secret,c=e.token,s=_n(),m=Object(l.g)(),d=Object(n.useState)(!1),p=u()(d,2),g=p[0],f=p[1],h=Object(n.useState)(""),b=u()(h,2),y=b[0],v=b[1],w=Object(Cn.useTable)({columns:t,data:a},Cn.useSortBy,Cn.usePagination),x=w.getTableProps,O=w.getTableBodyProps,k=w.headerGroups,j=w.rows,D=w.prepareRow,I=(w.pageOptions,w.page,w.state),C=I.pageIndex,S=I.pageSize,P=w.gotoPage,R=(w.previousPage,w.nextPage,w.setPageSize);return w.canPreviousPage,w.canNextPage,r.a.createElement(r.a.Fragment,null,r.a.createElement(Rn,{title:"Do you want to block this user ?",open:g,onAgree:function(){o(y,i,c),f(!1)},onDisagree:function(){return f(!1)}}),r.a.createElement("table",N()({},x(),{className:s.root}),r.a.createElement("thead",null,k.map((function(e){return r.a.createElement("tr",N()({},e.getHeaderGroupProps(),{className:s.header}),e.headers.map((function(e){return r.a.createElement("th",N()({},e.getHeaderProps(e.getSortByToggleProps()),{className:s.th}),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" 🔽":" 🔼":""))})))}))),r.a.createElement("tbody",O(),j.map((function(e,t){return D(e),r.a.createElement("tr",N()({},e.getRowProps(),{className:s.row}),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),"Actions"===e.column.Header?r.a.createElement(r.a.Fragment,null,"game"==e.row.original.tableType?r.a.createElement("div",{className:s.actions},r.a.createElement(E.a,{onClick:function(){return m.push("/admin/managegame/".concat(e.value))},variant:"contained",size:"small",color:"primary"},"View")):r.a.createElement("div",{className:s.actions},r.a.createElement(E.a,{onClick:function(){return m.push("/admin/manageuser/".concat(e.value))},variant:"contained",size:"small",color:"primary"},"View"),r.a.createElement(E.a,{onClick:function(){return function(e){v(e),f(!0)}(e.value)},variant:"contained",size:"small",color:"secondary",disabled:"True"==e.row.original.blocked},"False"==e.row.original.blocked?"Block":"Blocked"))):e.render("Cell"))})))})))),r.a.createElement(Sn.a,{rowsPerPageOptions:[10,20,30,50],component:"div",count:j.length,rowsPerPage:S,page:C,onChangePage:function(e,t){return P(t)},onChangeRowsPerPage:function(e){return R(e.target.value)}}))})),_n=Object(y.a)({root:{width:"100%",borderSpacing:0,borderCollapse:"collapse"},row:{borderBottom:"1px solid #f1f1f1",height:35,"&:hover":{background:"#f1f1f1"},"& > td":{paddingLeft:10}},header:{background:"#888",color:"white",textAlign:"left",height:40,"& > th":{paddingLeft:10}},actions:{"&>button":{margin:"auto 5px"}}}),Wn=Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:22,height:22},label:{minWidth:220},container:{margin:"10px 0",background:"#ddd",boxShadow:"0 2px 8px grey",borderRadius:8,padding:15}}}));var An=Object(s.b)((function(e){return{usersList:e.admin.userList}}))((function(e){var t=Wn(),a=e.location.search?Qa.a.parse(e.location.search):null,n=r.a.useMemo((function(){return[{Header:"STT",accessor:"stt"},{Header:"Email",accessor:"email"},{Header:"Name",accessor:"name"},{Header:"Verified",accessor:"verified",disableSortBy:!0},{Header:"Blocked",accessor:"blocked",disableSortBy:!0},{Header:"Actions",accessor:"actions",disableSortBy:!0}]}),[]),o=e.usersList;if(a){var i=Object.keys(a)[0];o=o.filter((function(e){return e[i].includes(a[i])}))}var l=r.a.useMemo((function(){return(o||[]).map((function(e,t){return{stt:t+1,email:e.email,name:e.name,verified:e.isVerified.toString()?"True":"False",blocked:e.isBlocked?"True":"False",actions:e._id}}))}),[o]);return r.a.createElement("div",null,r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(w.a,{color:"inherit",to:"/admin",component:c.b,className:t.link},r.a.createElement(Ca.a,{className:t.icon}),r.a.createElement(O.a,{variant:"body1",style:{color:"inherit"}},"Dashboard")),r.a.createElement(O.a,{variant:"body1",color:"textPrimary",className:t.link},r.a.createElement(On.a,{className:t.icon}),"Manage User")),r.a.createElement("div",{className:t.container},r.a.createElement(Tn,{columns:n,data:l})))})),Mn=Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:22,height:22},label:{minWidth:220},container:{margin:"10px 0",background:"#ddd",boxShadow:"0 2px 8px grey",borderRadius:8,padding:15}}}));var zn=Object(s.b)((function(e){return{gamesList:e.admin.gameList}}))((function(e){var t=Mn(),a=r.a.useMemo((function(){return[{Header:"STT",accessor:"stt"},{Header:"RoomID",accessor:"roomId"},{Header:"Status",accessor:"status"},{Header:"Date",accessor:"date"},{Header:"Steps",accessor:"steps"},{Header:"Chat",accessor:"chat"},{Header:"Actions",accessor:"actions",disableSortBy:!0}]}),[]),n=r.a.useMemo((function(){return(e.gamesList||[]).map((function(e,t){return{stt:t+1,roomId:e.roomID,date:_a()(e.start).format("DD-MM-YYYY hh:mm:ss"),status:function(e){switch(e){case 0:return"Game not end yet";case 1:return"X win";case 2:return"O win";case 3:return"Draw game";default:return"corrupt"}}(e.status),steps:"".concat(e.history.length," steps"),chat:"".concat(e.chat.length," messages"),actions:e._id,tableType:"game"}}))}),[]);return r.a.createElement("div",null,r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(w.a,{color:"inherit",to:"/admin",component:c.b,className:t.link},r.a.createElement(Ca.a,{className:t.icon}),r.a.createElement(O.a,{variant:"body1",style:{color:"inherit"}},"Dashboard")),r.a.createElement(O.a,{variant:"body1",color:"textPrimary",className:t.link},r.a.createElement(jn.a,{className:t.icon}),"Manage Game")),r.a.createElement("div",{className:t.container},r.a.createElement(Tn,{columns:a,data:n})))})),Gn=Object(s.b)((function(e){return{token:e.auth.token}}))((function(e){var t=Bn(),a=Object(n.useState)([]),o=u()(a,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){(function(){var t=ja()(Oa.a.mark((function t(){var a;return Oa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=5,r=e.token,Y.a.get("/api/users?sortBy=coins&start=0&end="+n,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}var n,r}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:t.root},r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",alignContent:"center",className:t.container},r.a.createElement(f.a,{item:!0,xs:12,className:t.title},r.a.createElement(O.a,{variant:"h5",color:"initial"},"LEADER BOARD")),r.a.createElement(f.a,{container:!0,item:!0,xs:12,direction:"column",justify:"center",alignItems:"center",alignContent:"center",className:t.top10},i.length&&i.map((function(e,a){return r.a.createElement(f.a,{key:a,item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",alignContent:"center"},r.a.createElement(f.a,{item:!0,xs:2,style:{textAlign:"center"}},r.a.createElement("img",{src:0===a?"http://localhost:3000/images/top1.png":1===a?"http://localhost:3000/images/top2.png":2===a?"http://localhost:3000/images/top3.png":"http://localhost:3000/images/top5.png",width:48,height:56})),r.a.createElement(f.a,{item:!0,xs:8,container:!0,direction:"row",wrap:"nowrap"},r.a.createElement(f.a,{item:!0,className:t.avatar},r.a.createElement("img",{src:"http://localhost:3000/images/icon-dinosaur.png",width:52,height:52})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 10px",overflow:"hidden"}},r.a.createElement(O.a,{variant:"h6",color:"initial",style:{overflow:"hidden",textOverflow:"ellipsis"}},e.name))),r.a.createElement(f.a,{item:!0,xs:2,container:!0,direction:"row"},r.a.createElement(f.a,{item:!0,style:{margin:"auto 0"}},r.a.createElement("img",{src:"http://localhost:3000/images/icon-medal.png",width:32,height:32})),r.a.createElement(f.a,{item:!0,style:{margin:"auto 0"}},r.a.createElement(O.a,{variant:"h6",color:"initial"},e.coins))))})))))})),Bn=Object(y.a)({root:{height:"calc(100vh - 64px)",width:"100vw",position:"relative",backgroundSize:"cover",backgroundImage:"url(".concat("http://localhost:3000/images/bg-rank.jpg",")")},container:{position:"absolute",zIndex:2},top10:{boxShadow:"0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset",borderRadius:12,marginTop:65,width:"40%",background:"white","&>div":{padding:"5px 10px"},"&>div:first-child":{marginTop:25},"&>div:last-child":{borderTop:"1px solid #ddd",borderRadius:12,boxShadow:"0 2px 3px black"},"&:before, &:after":{position:"absolute",zIndex:-1,boxShadow:"0 0 20px rgba(0,0,0,0.8)",top:10,bottom:10,left:0,right:0,borderRadius:"100px / 10px"},"&:after":{right:10,left:"auto",transform:"skew(8deg) rotate(3deg)"}},title:{position:"absolute",top:35,background:"#e43c3c",borderRadius:12,color:"white",padding:"10px 40px",boxShadow:"0 8px 6px -6px black"},avatar:{borderRadius:"50%",background:"#ddd"}}),qn=a("RIqP"),Fn=a.n(qn),Yn=a("aoE0"),Xn=a.n(Yn),Un=Object(y.a)({root:{},board:{marginTop:20,padding:"15px",background:"#d2d2d2",borderRadius:12,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"},status:{padding:"0px 10px 0 30px"},section:{},title:{fontWeight:"bold"},statusWrapper:{background:"#ddd",borderRadius:"0.8rem",padding:5,marginBottom:20,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px","&> button":{margin:"5px 0"}},icon:{margin:"auto 0"},button:{margin:"5px 0"}}),Hn=function(e,t){return Y.a.get("/api/games/"+e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},Vn=Object(l.i)((function(e){var t,a=Un(),o=(null===(t=e.history.location.state)||void 0===t?void 0:t.token)||null,i=Object(n.useState)(),c=u()(i,2),l=c[0],s=c[1],m=Object(n.useState)([]),d=u()(m,2),p=d[0],g=d[1],h=Object(n.useState)([]),b=u()(h,2),y=b[0],w=b[1],x=Object(n.useState)(null),k=u()(x,2),j=k[0],D=k[1],N=Object(n.useState)(0),I=u()(N,2),C=I[0],S=I[1],P=Object(n.useState)(0),L=u()(P,2),T=L[0],_=L[1],W=Object(n.useState)(2),A=u()(W,2),M=A[0],z=A[1],G=Object(n.useState)(99),B=u()(G,2),q=B[0],F=B[1],Y=Object(n.useState)([]),X=u()(Y,2),U=X[0],H=X[1];Object(n.useEffect)((function(){var t=e.match.params.id;(function(){var e=ja()(Oa.a.mark((function e(){var a,n,r,i;return Oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t,o);case 2:a=e.sent,n=a.history,F(a.status),H(a.chat),r=[{x:null,y:null,player:null}].concat(n),w(r),i=n.reduce((function(e,t){var a=e[e.length-1].squares.slice();return a[20*t.x+t.y]=t.player,e=e.concat({squares:a,isWin:null})}),[{squares:Array(400).fill(null),isWin:null}]),g(i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var V=function(e){var t=p[e].isWin;if(e){var a=y[e],n=a.x,r=a.y,o=a.player,i=20*n+r,c=p[e].squares;t||(t=na(i,c,o,20)),D(t)}S(e),t&&(p[e].isWin=t,g(Fn()(p)))};return r.a.createElement(r.a.Fragment,null,p.length?r.a.createElement(f.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",alignContent:"stretch"},r.a.createElement(f.a,{container:!0,item:!0,xs:12,md:9,className:a.root},r.a.createElement(f.a,{item:!0,xs:8,className:a.board},r.a.createElement(St,{squares:p[C].squares,size:20,handleClick:function(){s({type:"error",content:"Đang trong chế độ xem lại trận đấu, không phải trò chơi",open:!0})},winning:j})),r.a.createElement(f.a,{item:!0,xs:4,className:a.status},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:a.section,style:{padding:"15px 0 0"}},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:a.title},r.a.createElement(f.a,{item:!0,className:a.icon},r.a.createElement(Rt.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Function"))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,justify:"center",className:a.statusWrapper},r.a.createElement(f.a,{item:!0,xs:11,className:a.button},r.a.createElement(E.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e=null,t=0;e=setInterval((function(){t<y.length?V(t):clearInterval(e),t++}),1e3*M),_(e)}},"Play")),r.a.createElement(f.a,{item:!0,xs:11,className:a.button},r.a.createElement(E.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){clearInterval(T)}},"Pause")),r.a.createElement(f.a,{item:!0,xs:11,className:a.button},r.a.createElement(v.a,{variant:"outlined",label:"Time",size:"small",id:"time",type:"number",onChange:function(e){return z(e.target.value)},fullWidth:!0})),r.a.createElement(f.a,{item:!0,xs:11,className:a.button},r.a.createElement(E.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){return e.history.push(e.location.pathname.includes("admin")?"/admin/dashboard":"/")}},"Leave")))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,className:a.section},r.a.createElement(f.a,{item:!0,xs:12,container:!0,direction:"row",className:a.title},r.a.createElement(f.a,{item:!0,className:a.icon},r.a.createElement(Xn.a,null)),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Steps"))),r.a.createElement(f.a,{container:!0,item:!0,xs:12,justify:"center",className:a.statusWrapper,style:{maxHeight:"50vh"}},r.a.createElement(f.a,{item:!0,xs:11},r.a.createElement("ul",null,y.map((function(e,t){var a=t?"Go to move #".concat(t,"; Tick at ").concat(e.x,":").concat(e.y," by ").concat(e.player):"Go to game start";return t===e&&(a=r.a.createElement("b",null,a)),r.a.createElement("li",{key:t},r.a.createElement("button",{onClick:function(){return V(t)}},a))})),r.a.createElement("li",{key:"win-end"},r.a.createElement("button",{disabled:!0},function(e){var t=null;switch(e){case 1:t="X win this game";break;case 2:t="Y win this game";break;case 3:t="Game draw";break;case 4:case 0:t="Game corrupted, two player leaved";break;default:t="Calculating"}return t}(q))))))))),r.a.createElement(R,{message:l})),r.a.createElement(pa,{isReview:!0,timeFlag:C?y[C].timestamp:0,chats:U,isEnd:C==y.length-1})):r.a.createElement("p",null,"Đang tải trận, vui lòng chờ"))}));console.log(La.a);var Jn=Object(y.a)((function(e){return{link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:30,height:30},label:{minWidth:85},container:{margin:"10px 0",background:"#ddd",boxShadow:"0 2px 8px grey",borderRadius:8,padding:15},avatar:{borderRadius:"50%",background:"#ddd"},info:{marginLeft:20,paddingLeft:"15px !important",borderLeft:"1px solid #ddd"},historyGame:{background:"#d2d2d2",borderRadius:12,boxShadow:"0 1px 5px black"},game:{padding:10},textField:{width:300}}})),Kn=function(){return r.a.createElement(f.a,{item:!0,xs:12,style:{width:"100%",padding:"10px 0"}},r.a.createElement(Na.a,null))},Qn=Object(s.b)((function(e){return{usersList:e.admin.userList,gamesList:e.admin.gameList,token:e.auth.token}}))((function(e){var t=Jn(),a=Object(l.g)(),n=Object(l.h)().id,o=e.usersList.find((function(e){return e._id==n})),i=e.gamesList.filter((function(e){return o.games.some((function(t){return t.id===e._id}))}));return r.a.createElement("div",null,r.a.createElement(Da.a,{"aria-label":"breadcrumb"},r.a.createElement(w.a,{color:"inherit",to:"/admin",component:c.b,className:t.link},r.a.createElement(Ca.a,{className:t.icon}),r.a.createElement(O.a,{variant:"body1",style:{color:"inherit"}},"Dashboard")),r.a.createElement(w.a,{color:"inherit",to:"/admin/manageuser",component:c.b,className:t.link},r.a.createElement(On.a,{className:t.icon}),r.a.createElement(O.a,{variant:"body1",style:{color:"inherit"}},"Manage User")),r.a.createElement(O.a,{variant:"body1",color:"textPrimary",className:t.link},r.a.createElement(La.a,{className:t.icon}),"User Detail")),r.a.createElement(Kn,null),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12,direction:"row",wrap:"nowrap"},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-dinosaur.png",className:t.avatar})),r.a.createElement(f.a,{item:!0,container:!0,direction:"column",className:t.info},r.a.createElement(f.a,{item:!0,container:!0,direction:"row"},r.a.createElement(f.a,{item:!0},r.a.createElement("img",{src:"http://localhost:3000/images/icon-medal.png",width:35,height:35})),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},o.coins))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Win: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},o.win))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Lose: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"primary"},o.lose))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Draw: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},o.draw))),r.a.createElement(f.a,{item:!0,container:!0,direction:"row",spacing:1},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6"},"Total: ")),r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"secondary"},o.games.length))))),r.a.createElement(Kn,null),r.a.createElement(f.a,{item:!0,container:!0,xs:12,spacing:1},r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Email:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{autoFocus:!0,id:"email",size:"small",className:t.textField,value:o.email,variant:"outlined",fullWidth:!0,disabled:!0}))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Name:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"name",size:"small",className:t.textField,value:o.name,variant:"outlined",fullWidth:!0,disabled:!0}))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Verified:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"verified",size:"small",className:t.textField,value:o.isVerified?"True":"False",variant:"outlined",fullWidth:!0,disabled:!0}))),r.a.createElement(f.a,{item:!0,container:!0,spacing:1,xs:12},r.a.createElement(f.a,{item:!0},r.a.createElement(O.a,{variant:"h6",color:"initial",className:t.label},"Blocked:")),r.a.createElement(f.a,{item:!0},r.a.createElement(v.a,{id:"blocked",size:"small",className:t.textField,value:o.isBlocked?"True":"False",variant:"outlined",fullWidth:!0,disabled:!0})))),r.a.createElement(Kn,null),r.a.createElement(f.a,{item:!0,container:!0,xs:12,spacing:1},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(O.a,{variant:"h6",color:"initial"},"Games History")),r.a.createElement(f.a,{item:!0,xs:12,className:t.historyGame},r.a.createElement(f.a,{item:!0,container:!0,xs:12,direction:"row",justify:"space-between",wrap:"nowrap",className:t.game},r.a.createElement(f.a,{item:!0,xs:1},r.a.createElement(O.a,{variant:"h6",align:"center"},"RoomID")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6"},"Status")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6",align:"center"},"Date")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"h6"},"Actions"))),(i||[]).map((function(n,o){return r.a.createElement(f.a,{key:o,item:!0,container:!0,xs:12,direction:"row",justify:"space-between",wrap:"nowrap",className:t.game},r.a.createElement(f.a,{item:!0,xs:1},r.a.createElement(O.a,{variant:"subtitle2",align:"center"},n.roomID)),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"subtitle2"},4===n.status?"Corrupt game":1===n.status?"X":"Draw game")),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(O.a,{variant:"subtitle2",align:"center"},_a()(n.start).format("DD-MM-YYYY hh:mm:ss"))),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return a.push("/admin/review/"+n._id,{token:e.token})}},"View detail")))})))))})),Zn=function(e){return r.a.createElement("div",null)},$n=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.token,role:e.user.role,secretKey:e.user.secretKey}}))((function(e){return e.isAuthenticated?e.secretKey?r.a.createElement(wn,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/admin/dashboard",component:In,exact:!0}),r.a.createElement(l.b,{path:"/admin/manageuser",component:An,exact:!0}),r.a.createElement(l.b,{path:"/admin/manageuser/:id",component:Qn}),r.a.createElement(l.b,{path:"/admin/managegame",component:zn,exact:!0}),r.a.createElement(l.b,{path:"/admin/review/:id",component:Vn}),r.a.createElement(l.b,{path:"/admin/managegame/:id",component:Zn}),r.a.createElement(l.b,{path:"/admin/profile",component:Ga}),r.a.createElement(l.b,{path:"/admin/changepassword",component:Xa}),r.a.createElement(l.b,{path:"/404",component:be}),r.a.createElement(l.a,{to:"/404"}))):r.a.createElement(Dt,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",component:ft,exact:!0}),r.a.createElement(l.b,{path:"/room/:id",component:ha}),e.role&&e.role.includes("admin")&&r.a.createElement(l.b,{path:"/admin/login",component:fe,exact:!0}),r.a.createElement(l.b,{path:"/profile",component:Ga}),r.a.createElement(l.b,{path:"/changepassword",component:Xa}),r.a.createElement(l.b,{path:"/review/:id",component:Vn}),r.a.createElement(l.b,{path:"/rank",component:Gn}),r.a.createElement(l.b,{path:"/404",component:be}),r.a.createElement(l.a,{to:"/404"}))):r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",component:te,exact:!0}),r.a.createElement(l.b,{path:"/auth/success",component:le}),r.a.createElement(l.b,{path:"/password/forgot",component:wa}),r.a.createElement(l.b,{path:"/password/reset",component:Ea}),r.a.createElement(l.b,{path:"/404",component:be}),r.a.createElement(l.a,{to:"/404"}))})),er=a("ANjH"),tr=a("sINF");function ar(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function nr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ar(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function rr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function or(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ir(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function cr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ir(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function lr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function mr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ur(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function dr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function gr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var hr=a("SVmU"),br=a("oAJy"),yr=a.n(br),Er=Object(er.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return nr({},t.payload);case"join":return e.inRoom=t.payload,nr({},e);case"logout":return{};default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init_room":var a=t.payload.data.reduce((function(e,t){return e[t.roomID]={id:t.roomID,players:{X:{id:t.X.id,name:t.X.name,coins:t.X.coins},Y:{id:t.Y.id,name:t.Y.name,coins:t.Y.coins}},status:"hidden"===t.roomType?1:0,password:t.password,timer:t.timer,result:0,roomType:t.roomType,coins:t.coins},e}),{});return or({},a);case"add_room":return e[t.payload.id]=t.payload,or({},e);case"remove_room":return delete e[t.payload.id],or({},e);case"add_player":return e[t.payload.id]&&(e[t.payload.id].players.Y.id?e[t.payload.id].players.X.id||(e[t.payload.id].players.X={id:t.payload.playerID,name:t.payload.playerName,coins:t.payload.playerCoins}):e[t.payload.id].players.Y={id:t.payload.playerID,name:t.payload.playerName,coins:t.payload.playerCoins}),or({},e);case"remove_player":return e[t.payload.roomID]&&(e[t.payload.roomID].players=t.payload.players),or({},e);case"add_viewer":return e[t.payload.id]&&(e[t.payload.id].viewer?e[t.payload.id].viewer=e[t.payload.id].viewer.concat({id:t.payload.viewerID,name:t.payload.viewerName}):e[t.payload.id].viewer=[{id:t.payload.viewerID,name:t.payload.viewerName}]),or({},e);case"remove_viewer":return e[t.payload.id]&&(e[t.payload.id].viewer=e[t.payload.id].viewer.filter((function(e){return e.id!==t.payload.viewerID}))),or({},e);case"update_room":return e[t.payload.roomID]&&(e[t.payload.roomID][t.payload.property]=t.payload.newData),or({},e);case"change_status":return e[t.payload.id]&&(e[t.payload.id].status=t.payload.status),or({},e);case"update_result":return e[t.payload.id]&&(e[t.payload.id].result=t.payload.result),or({},e);case"update_coins":return e[t.payload.roomID]&&(e[t.payload.roomID].players[t.payload.player].coins=t.payload.newNumber),or({},e);default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_message":var a=t.payload,n=a.roomID,r=a.message,o=a.timestamp,i=a.isMyMessage,c=a.owner;return e[n]?e[n].push({message:r,timestamp:o,isMyMessage:i,owner:c}):e[n]=[{message:r,timestamp:o,isMyMessage:i,owner:c}],cr({},e);default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"create_board":var a=t.payload.size;return e[t.payload.roomID]||(e[t.payload.roomID]=[{squares:Array(a*a).fill(null),status:null,player:null}]),sr({},e);case"add_board":var n=t.payload,r=n.squares,o=n.status,i=n.player;return e[t.payload.roomID]&&(e[t.payload.roomID]=e[t.payload.roomID].concat({squares:r,status:o,player:i})),sr({},e);case"game_delete":return e[t.payload.roomID]&&(e[t.payload.roomID]=[{squares:Array(t.payload.size*t.payload.size).fill(null),status:null,player:null}]),sr({},e);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init_info":return ur({},t.payload);case"update_info":return e[t.payload.property]=t.payload.newData,ur({},e);case"clear_info":return{};case"set_users_list":return e.usersList=t.payload.usersList,ur({},e);default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_games_list":return e.gamesList=t.payload.gamesList,pr({},e);default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userList:[],gameList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init_userlist":return e.userList=Fn()(t.payload),fr({},e);case"init_gamelist":return e.gameList=Fn()(t.payload),fr({},e);case"update_user_admin":return e.userList=e.userList.map((function(e){return e._id==t.payload.id&&(e[t.payload.property]=t.payload.value),e})),fr({},e);default:return e}}}),vr={key:"root",whitelist:["auth","user"],blacklist:[],storage:yr.a.createInstance({name:"RVN-data"})},wr=Object(hr.a)(vr,Er),xr=Object(er.d)(wr,{},Object(er.a)(tr.a)),Or=Object(hr.b)(xr),kr=a("KMx9"),jr=function(){return r.a.createElement(s.a,{store:xr},r.a.createElement(kr.a,{loading:null,persistor:Or},r.a.createElement(c.a,null,r.a.createElement($n,null))))};i.a.render(r.a.createElement(jr,null),document.getElementById("root"))},coPr:function(e,t,a){(t=a("JPst")(!1)).push([e.i,".small-box {\r\n  border-radius: 0.25rem;\r\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0.125), 0 1px 3px rgba(0, 0, 0, 0.2);\r\n  display: block;\r\n  position: relative;\r\n}\r\n\r\n.small-box > .inner {\r\n  padding: 10px;\r\n}\r\n\r\n.small-box > .small-box-footer {\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n  color: rgba(255, 255, 255, 0.8);\r\n  display: block;\r\n  padding: 3px 0;\r\n  position: relative;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  z-index: 10;\r\n}\r\n\r\n.small-box > .small-box-footer:hover {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  color: #fff;\r\n}\r\n\r\n.small-box h3 {\r\n  font-size: 2.2rem;\r\n  font-weight: 700;\r\n  margin: 0 0 10px;\r\n  padding: 0;\r\n  white-space: nowrap;\r\n}\r\n\r\n@media (min-width: 992px) {\r\n  .col-xl-2 .small-box h3,\r\n  .col-lg-2 .small-box h3,\r\n  .col-md-2 .small-box h3 {\r\n    font-size: 1.6rem;\r\n  }\r\n  .col-xl-3 .small-box h3,\r\n  .col-lg-3 .small-box h3,\r\n  .col-md-3 .small-box h3 {\r\n    font-size: 1.6rem;\r\n  }\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .col-xl-2 .small-box h3,\r\n  .col-lg-2 .small-box h3,\r\n  .col-md-2 .small-box h3 {\r\n    font-size: 2.2rem;\r\n  }\r\n  .col-xl-3 .small-box h3,\r\n  .col-lg-3 .small-box h3,\r\n  .col-md-3 .small-box h3 {\r\n    font-size: 2.2rem;\r\n  }\r\n}\r\n\r\n.small-box p {\r\n  font-size: 1rem;\r\n}\r\n\r\n.small-box p > small {\r\n  color: #f8f9fa;\r\n  display: block;\r\n  font-size: 0.9rem;\r\n  margin-top: 5px;\r\n}\r\n\r\n.small-box h3,\r\n.small-box p {\r\n  z-index: 5;\r\n}\r\n\r\n.small-box .icon {\r\n  color: rgba(0, 0, 0, 0.15);\r\n  z-index: 0;\r\n}\r\n\r\n.small-box .icon > i {\r\n  font-size: 90px;\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 15px;\r\n  transition: transform 0.3s linear;\r\n}\r\n\r\n.small-box .icon > i.fa,\r\n.small-box .icon > i.fas,\r\n.small-box .icon > i.far,\r\n.small-box .icon > i.fab,\r\n.small-box .icon > i.fal,\r\n.small-box .icon > i.fad,\r\n.small-box .icon > i.ion {\r\n  font-size: 70px;\r\n  top: 20px;\r\n}\r\n\r\n.small-box .icon svg {\r\n  font-size: 70px;\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 15px;\r\n  transition: transform 0.3s linear;\r\n}\r\n\r\n.small-box:hover {\r\n  text-decoration: none;\r\n}\r\n\r\n.small-box:hover .icon > i,\r\n.small-box:hover .icon > i.fa,\r\n.small-box:hover .icon > i.fas,\r\n.small-box:hover .icon > i.far,\r\n.small-box:hover .icon > i.fab,\r\n.small-box:hover .icon > i.fal,\r\n.small-box:hover .icon > i.fad,\r\n.small-box:hover .icon > i.ion {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.small-box:hover .icon > svg {\r\n  transform: scale(1.1);\r\n}\r\n\r\n@media (max-width: 767.98px) {\r\n  .small-box {\r\n    text-align: center;\r\n  }\r\n  .small-box .icon {\r\n    display: none;\r\n  }\r\n  .small-box p {\r\n    font-size: 12px;\r\n  }\r\n}\r\n\r\n.bg-info {\r\n  background-color: #17a2b8 !important;\r\n}\r\n\r\n.bg-info,\r\n.bg-info > a {\r\n  color: #fff !important;\r\n}\r\n\r\n.bg-warning {\r\n  background-color: #ffc107 !important;\r\n}\r\n\r\n.bg-warning,\r\n.bg-warning > a {\r\n  color: #1f2d3d !important;\r\n}\r\n",""]),e.exports=t},dKwb:function(e,t,a){var n={"./vi":"KSF8","./vi.js":"KSF8"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="dKwb"},ettg:function(e,t,a){(t=a("JPst")(!1)).push([e.i,'body {\r\n  font: 14px "Century Gothic", Futura, sans-serif;\r\n  margin: 0;\r\n}\r\n\r\nol,\r\nul {\r\n  padding-left: 30px;\r\n}\r\n\r\n.board-row:after {\r\n  clear: both;\r\n  content: "";\r\n  display: table;\r\n}\r\n\r\n.status {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.square {\r\n  background: #fff;\r\n  border: 1px solid #999;\r\n  float: left;\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  line-height: 32px;\r\n  height: 33px;\r\n  margin-right: -1px;\r\n  margin-top: -1px;\r\n  padding: 0;\r\n  text-align: center;\r\n  width: 33px;\r\n  cursor: pointer;\r\n}\r\n\r\n.square:hover {\r\n  background-color: rgb(219, 219, 219);\r\n}\r\n\r\n.square-winning {\r\n  border: 3px solid red;\r\n}\r\n\r\n.square:focus {\r\n  outline: none;\r\n}\r\n\r\n.kbd-navigation .square:focus {\r\n  background: #ddd;\r\n}\r\n\r\n.game {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.game-info {\r\n  margin-left: 20px;\r\n}\r\n\r\n@keyframes rotate {\r\n  100% {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n\r\n.rainbow {\r\n  position: relative;\r\n  z-index: 0;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n\r\n.rainbow::before {\r\n  content: "";\r\n  position: absolute;\r\n  z-index: -2;\r\n  left: -50%;\r\n  top: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background-color: #399953;\r\n  background-repeat: no-repeat;\r\n  background-size: 50% 50%, 50% 50%;\r\n  background-position: 0 0, 100% 0, 100% 100%, 0 100%;\r\n  background-image: linear-gradient(#399953, #399953), linear-gradient(#fbb300, #fbb300),\r\n    linear-gradient(#d53e33, #d53e33), linear-gradient(#377af5, #377af5);\r\n  animation: rotate 4s linear infinite;\r\n}\r\n\r\n.rainbow::after {\r\n  content: "";\r\n  position: absolute;\r\n  z-index: -1;\r\n  left: 3px;\r\n  top: 3px;\r\n  width: calc(100% - 6px);\r\n  height: calc(100% - 6px);\r\n  background: #ddd;\r\n  border-radius: 5px;\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n',""]),e.exports=t}},[["WJG9",19,7,2,1,12,4,16,18,15,17,13,8,11,14,10,3,5,6,9,20]]]);